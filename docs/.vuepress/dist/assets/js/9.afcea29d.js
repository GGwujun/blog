(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{230:function(t,v,_){"use strict";_.r(v);var a=_(2),e=Object(a.a)({},function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("blockquote",[_("p",[t._v("当一个代码仓库进过长时间的迭代，针对不同的时期和需求，必定会有不同的版本。而借助 Git 提供的标签功能，可以快捷方便地记录代码版本。无论什么时候，想取回某个版本，不再需要查找冗长的"),_("code",[t._v("commit_id")]),t._v("，只需要取出打标签的历史版本即可。")])]),t._v(" "),_("p",[t._v("可以这么理解："),_("strong",[t._v("标签是版本库的一个快照")]),t._v("。在主流的 Git 平台上，版本可以直接下载的，节省了开发者的不少精力。")]),t._v(" "),_("p",[t._v("下面记录下如何借助 标签 进行版本管理。")]),t._v(" "),_("h3",{attrs:{id:"_1-环境仿真"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-环境仿真","aria-hidden":"true"}},[t._v("#")]),t._v(" 1. 环境仿真")]),t._v(" "),_("p",[t._v("首先我在 github 上建立了一个仓库。如你所见，这是一个全新仓库："),_("a",{attrs:{href:"https://github.com/dongyuanxin/git-demos",target:"_blank",rel:"noopener noreferrer"}},[t._v(">>> Star now"),_("OutboundLink")],1)]),t._v(" "),_("p",[_("img",{attrs:{src:"https://static.godbmw.com/images/Git/%E6%A0%87%E7%AD%BE%E5%BA%94%E7%94%A8%E5%92%8C%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/1.png",alt:""}})]),t._v(" "),_("p",[t._v("执行"),_("code",[t._v("git clone git@github.com:dongyuanxin/git-demos.git")]),t._v(", 将代码库 clone 到本地后。")]),t._v(" "),_("p",[t._v("在根目录下创建一个"),_("code",[t._v("hello.v1.py")]),t._v("文件："),_("code",[t._v("touch hello.v1.py")]),t._v("。代码如下：")]),t._v(" "),_("div",{staticClass:"language-python line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-python"}},[_("code",[_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# hello.v1.py")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"This is version 1.0"')]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br")])]),_("h3",{attrs:{id:"_2-本地标签操作"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-本地标签操作","aria-hidden":"true"}},[t._v("#")]),t._v(" 2. 本地标签操作")]),t._v(" "),_("p",[t._v("下面记录了本地标签操作的常用命令：")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("命令")]),t._v(" "),_("th",[t._v("作用")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("code",[t._v("git tag")])]),t._v(" "),_("td",[t._v("查看所有标签")])]),t._v(" "),_("tr",[_("td",[_("code",[t._v("git tag <tagname>")])]),t._v(" "),_("td",[t._v("创建标签：tagname")])]),t._v(" "),_("tr",[_("td",[_("code",[t._v("git tag -a <tagname> -m <comment>")])]),t._v(" "),_("td",[t._v("为标签 tagname 增加说明 comment")])]),t._v(" "),_("tr",[_("td",[_("code",[t._v("git show <tagname>")])]),t._v(" "),_("td",[t._v("查看标签：tagname 的内容")])]),t._v(" "),_("tr",[_("td",[_("code",[t._v("git tag -d <tagname>")])]),t._v(" "),_("td",[t._v("删除标签：tagname")])])])]),t._v(" "),_("p",[t._v("其中，创建标签 tagname 并且增加说明 comment，可以简写成："),_("code",[t._v("git tag <tagname> -m <comment>")])]),t._v(" "),_("p",[t._v("Now, 为代码库在本地打上标签："),_("code",[t._v("git tag v1.0.0 -m 'v1.0.0正式版本'")]),t._v("。")]),t._v(" "),_("h3",{attrs:{id:"_3-标签的远程推送和拉取"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-标签的远程推送和拉取","aria-hidden":"true"}},[t._v("#")]),t._v(" 3. 标签的远程推送和拉取")]),t._v(" "),_("p",[t._v("在本地打好标签后，需要将标签推送到 Git 平台（比如 GitHub）上，才能留下版本快照，供别人下载使用。")]),t._v(" "),_("p",[t._v("除此之外，还有可能删除已经发布的标签（比如标签命名不合规范）。")]),t._v(" "),_("p",[t._v("下面记录了远程标签操作的常用命令：")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("命令")]),t._v(" "),_("th",[t._v("作用")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("code",[t._v("git push origin --tags")])]),t._v(" "),_("td",[t._v("推送所有标签")])]),t._v(" "),_("tr",[_("td",[_("code",[t._v("git push origin <tagname>")])]),t._v(" "),_("td",[t._v("推送指定标签")])])])]),t._v(" "),_("p",[t._v("我们首先将"),_("code",[t._v("v1.0.0")]),t._v("版本推送到 Github："),_("code",[t._v("git push origin v1.0.0")])]),t._v(" "),_("p",[t._v("然后，打开仓库，我们会发现"),_("code",[t._v("releases")]),t._v("标签已经变成了 1。\n"),_("img",{attrs:{src:"https://static.godbmw.com/images/Git/%E6%A0%87%E7%AD%BE%E5%BA%94%E7%94%A8%E5%92%8C%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/2.png",alt:""}})]),t._v(" "),_("p",[t._v("点进去，会发现我们可以直接下载"),_("code",[t._v("v1.0.0")]),t._v("版本。所以，标签是版本的快照。\n"),_("img",{attrs:{src:"https://static.godbmw.com/images/Git/%E6%A0%87%E7%AD%BE%E5%BA%94%E7%94%A8%E5%92%8C%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/3.png",alt:""}})]),t._v(" "),_("p",[t._v("值得一提的是："),_("strong",[t._v("标签会随着"),_("code",[t._v("git clone")]),t._v("仓库时候，自动拉取到本地")]),t._v("。不信的话可以 clone 一下这个代码仓库，查看是不是已经有了"),_("code",[t._v("v1.0.0")]),t._v("这个标签。")]),t._v(" "),_("h3",{attrs:{id:"_4-标签的删除"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-标签的删除","aria-hidden":"true"}},[t._v("#")]),t._v(" 4. 标签的删除")]),t._v(" "),_("p",[t._v("标签的删除请慎重，尤其是删除远程标签（"),_("em",[t._v("一般来说，没有人会这么做")]),t._v("）。命令如下：")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("命令")]),t._v(" "),_("th",[t._v("作用")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("code",[t._v("git tag -d <tagname>")])]),t._v(" "),_("td",[t._v("删除指定标签")])]),t._v(" "),_("tr",[_("td",[_("code",[t._v("git push origin :refs/tags/<tagname>")])]),t._v(" "),_("td",[t._v("删除远程标签")])])])]),t._v(" "),_("h3",{attrs:{id:"_5-拓展阅读"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-拓展阅读","aria-hidden":"true"}},[t._v("#")]),t._v(" 5. 拓展阅读")]),t._v(" "),_("p",[t._v("版本管理可以借助 git 的 tag 来实现。但是，在开发过程中，不可能每次修改都打标签然后发布。")]),t._v(" "),_("p",[t._v("实际开发中，一般会有一个"),_("code",[t._v("dev")]),t._v("分支，作为开发版本分支。在没有完成此次开发任务前，所有的代码都是合并到"),_("code",[t._v("dev")]),t._v("分支。")]),t._v(" "),_("p",[t._v("当完成了开发任务，管理者会将"),_("code",[t._v("dev")]),t._v("分支合并到"),_("code",[t._v("master")]),t._v("分支，然后删除"),_("code",[t._v("dev")]),t._v("分支，并且通过打标签来发布版本。")]),t._v(" "),_("p",[t._v("这就是为什么很多放弃维护的大型开源项目只有"),_("code",[t._v("master")]),t._v("分支的原因。")])])},[],!1,null,null,null);v.default=e.exports}}]);