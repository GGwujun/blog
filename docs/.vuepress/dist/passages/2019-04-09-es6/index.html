<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ES6é‡éš¾ç‚¹æ•´ç† | å¿ƒè°­åšå®¢</title>
    <meta name="description" content="é‘«è°ˆï¼Œä¹Ÿæ˜¯å¿ƒè°­ã€‚å·²æœ‰å‰ç«¯çŸ¥è¯†ä½“ç³»æ¢³ç†ã€è®¾è®¡æ¨¡å¼æ‰‹å†Œã€Webpack4æ•™ç¨‹ï¼Œæ¬¢è¿é£Ÿç”¨">
    
    
    <link rel="preload" href="/assets/css/0.styles.e214c3df.css" as="style"><link rel="preload" href="/assets/js/app.98e72b6c.js" as="script"><link rel="preload" href="/assets/js/2.15ea491b.js" as="script"><link rel="preload" href="/assets/js/48.2b8b3908.js" as="script"><link rel="preload" href="/assets/js/3.fcfbf359.js" as="script"><link rel="prefetch" href="/assets/js/10.39bac0b1.js"><link rel="prefetch" href="/assets/js/100.fd57ed96.js"><link rel="prefetch" href="/assets/js/101.f0b6aa5b.js"><link rel="prefetch" href="/assets/js/102.93205558.js"><link rel="prefetch" href="/assets/js/103.2cc6782c.js"><link rel="prefetch" href="/assets/js/104.f255d951.js"><link rel="prefetch" href="/assets/js/105.30450a2c.js"><link rel="prefetch" href="/assets/js/106.fd065682.js"><link rel="prefetch" href="/assets/js/107.485b8ade.js"><link rel="prefetch" href="/assets/js/108.fec2805b.js"><link rel="prefetch" href="/assets/js/109.32f99e0e.js"><link rel="prefetch" href="/assets/js/11.9d8470e1.js"><link rel="prefetch" href="/assets/js/110.60e1e5ca.js"><link rel="prefetch" href="/assets/js/111.1adc89df.js"><link rel="prefetch" href="/assets/js/112.e0ffd5f5.js"><link rel="prefetch" href="/assets/js/113.0a7c42c6.js"><link rel="prefetch" href="/assets/js/114.0ccb917a.js"><link rel="prefetch" href="/assets/js/115.58d882ed.js"><link rel="prefetch" href="/assets/js/116.02bf4dfa.js"><link rel="prefetch" href="/assets/js/117.cc9bb604.js"><link rel="prefetch" href="/assets/js/118.290c0997.js"><link rel="prefetch" href="/assets/js/119.345f23d3.js"><link rel="prefetch" href="/assets/js/12.69db6e7a.js"><link rel="prefetch" href="/assets/js/120.cad3cc1c.js"><link rel="prefetch" href="/assets/js/121.3183b4ba.js"><link rel="prefetch" href="/assets/js/122.e7c7cd4e.js"><link rel="prefetch" href="/assets/js/123.ca0a1008.js"><link rel="prefetch" href="/assets/js/124.56baffd8.js"><link rel="prefetch" href="/assets/js/125.5f1ccc3a.js"><link rel="prefetch" href="/assets/js/126.4b49eb83.js"><link rel="prefetch" href="/assets/js/127.eae0256d.js"><link rel="prefetch" href="/assets/js/128.a5bdf96b.js"><link rel="prefetch" href="/assets/js/129.23920d9c.js"><link rel="prefetch" href="/assets/js/13.e7120643.js"><link rel="prefetch" href="/assets/js/130.04eb36b3.js"><link rel="prefetch" href="/assets/js/131.434cc23c.js"><link rel="prefetch" href="/assets/js/132.c4627d1e.js"><link rel="prefetch" href="/assets/js/133.2c6e4dfb.js"><link rel="prefetch" href="/assets/js/134.6090f7de.js"><link rel="prefetch" href="/assets/js/135.0b59bb53.js"><link rel="prefetch" href="/assets/js/136.778cb385.js"><link rel="prefetch" href="/assets/js/137.1f77396a.js"><link rel="prefetch" href="/assets/js/138.1ee7876c.js"><link rel="prefetch" href="/assets/js/139.bc6171bb.js"><link rel="prefetch" href="/assets/js/14.d787716a.js"><link rel="prefetch" href="/assets/js/15.07cb8854.js"><link rel="prefetch" href="/assets/js/16.55631492.js"><link rel="prefetch" href="/assets/js/17.39b44c67.js"><link rel="prefetch" href="/assets/js/18.730379b2.js"><link rel="prefetch" href="/assets/js/19.3348c346.js"><link rel="prefetch" href="/assets/js/20.32593131.js"><link rel="prefetch" href="/assets/js/21.e7c39bb9.js"><link rel="prefetch" href="/assets/js/22.025cdbee.js"><link rel="prefetch" href="/assets/js/23.3274e647.js"><link rel="prefetch" href="/assets/js/24.973bc691.js"><link rel="prefetch" href="/assets/js/25.150d6800.js"><link rel="prefetch" href="/assets/js/26.7c17416c.js"><link rel="prefetch" href="/assets/js/27.32965f2a.js"><link rel="prefetch" href="/assets/js/28.9f663a47.js"><link rel="prefetch" href="/assets/js/29.8b84c271.js"><link rel="prefetch" href="/assets/js/30.5cd4125e.js"><link rel="prefetch" href="/assets/js/31.63c70206.js"><link rel="prefetch" href="/assets/js/32.2dbfd237.js"><link rel="prefetch" href="/assets/js/33.4e0e61be.js"><link rel="prefetch" href="/assets/js/34.6b0b483b.js"><link rel="prefetch" href="/assets/js/35.75ac7c1b.js"><link rel="prefetch" href="/assets/js/36.0c18ddf2.js"><link rel="prefetch" href="/assets/js/37.c993e1e1.js"><link rel="prefetch" href="/assets/js/38.c24f4000.js"><link rel="prefetch" href="/assets/js/39.d49313ea.js"><link rel="prefetch" href="/assets/js/4.f5c89672.js"><link rel="prefetch" href="/assets/js/40.9e5329d9.js"><link rel="prefetch" href="/assets/js/41.05020e95.js"><link rel="prefetch" href="/assets/js/42.410d449d.js"><link rel="prefetch" href="/assets/js/43.b60931c5.js"><link rel="prefetch" href="/assets/js/44.73ee05cc.js"><link rel="prefetch" href="/assets/js/45.e5dd79c8.js"><link rel="prefetch" href="/assets/js/46.40c35b80.js"><link rel="prefetch" href="/assets/js/47.e96bc621.js"><link rel="prefetch" href="/assets/js/49.b439f61d.js"><link rel="prefetch" href="/assets/js/5.ae989ac8.js"><link rel="prefetch" href="/assets/js/50.8e5dfed6.js"><link rel="prefetch" href="/assets/js/51.2d1c36b1.js"><link rel="prefetch" href="/assets/js/52.660b2366.js"><link rel="prefetch" href="/assets/js/53.78a4d656.js"><link rel="prefetch" href="/assets/js/54.56d144b9.js"><link rel="prefetch" href="/assets/js/55.7c851ed5.js"><link rel="prefetch" href="/assets/js/56.a8752b80.js"><link rel="prefetch" href="/assets/js/57.c746b49d.js"><link rel="prefetch" href="/assets/js/58.cf844bc7.js"><link rel="prefetch" href="/assets/js/59.b72c8894.js"><link rel="prefetch" href="/assets/js/6.48d02ac7.js"><link rel="prefetch" href="/assets/js/60.30569bec.js"><link rel="prefetch" href="/assets/js/61.6132f7ca.js"><link rel="prefetch" href="/assets/js/62.68fedabc.js"><link rel="prefetch" href="/assets/js/63.b8f40dcc.js"><link rel="prefetch" href="/assets/js/64.878f889f.js"><link rel="prefetch" href="/assets/js/65.bb38527f.js"><link rel="prefetch" href="/assets/js/66.59984850.js"><link rel="prefetch" href="/assets/js/67.e759b917.js"><link rel="prefetch" href="/assets/js/68.37726cee.js"><link rel="prefetch" href="/assets/js/69.491945cb.js"><link rel="prefetch" href="/assets/js/7.45a1085e.js"><link rel="prefetch" href="/assets/js/70.fd4eb363.js"><link rel="prefetch" href="/assets/js/71.4c6972ae.js"><link rel="prefetch" href="/assets/js/72.d0bba548.js"><link rel="prefetch" href="/assets/js/73.1f532f8d.js"><link rel="prefetch" href="/assets/js/74.c7b62ea7.js"><link rel="prefetch" href="/assets/js/75.218717d7.js"><link rel="prefetch" href="/assets/js/76.c3af233f.js"><link rel="prefetch" href="/assets/js/77.e71ce0bd.js"><link rel="prefetch" href="/assets/js/78.4c3f4fcb.js"><link rel="prefetch" href="/assets/js/79.300a4bc7.js"><link rel="prefetch" href="/assets/js/8.219bbcf2.js"><link rel="prefetch" href="/assets/js/80.856b02a6.js"><link rel="prefetch" href="/assets/js/81.6fc6b734.js"><link rel="prefetch" href="/assets/js/82.749d412d.js"><link rel="prefetch" href="/assets/js/83.41613da2.js"><link rel="prefetch" href="/assets/js/84.e621bd7b.js"><link rel="prefetch" href="/assets/js/85.d8bfcd9e.js"><link rel="prefetch" href="/assets/js/86.d805d7f4.js"><link rel="prefetch" href="/assets/js/87.2a899dbc.js"><link rel="prefetch" href="/assets/js/88.d6b2137c.js"><link rel="prefetch" href="/assets/js/89.54824c92.js"><link rel="prefetch" href="/assets/js/9.afcea29d.js"><link rel="prefetch" href="/assets/js/90.6075d856.js"><link rel="prefetch" href="/assets/js/91.f6557b72.js"><link rel="prefetch" href="/assets/js/92.070c03a7.js"><link rel="prefetch" href="/assets/js/93.460de4ea.js"><link rel="prefetch" href="/assets/js/94.75cbb7d2.js"><link rel="prefetch" href="/assets/js/95.f6c99f96.js"><link rel="prefetch" href="/assets/js/96.cd5208a0.js"><link rel="prefetch" href="/assets/js/97.ba3f4381.js"><link rel="prefetch" href="/assets/js/98.3042d54f.js"><link rel="prefetch" href="/assets/js/99.e7085bcb.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e214c3df.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">å¿ƒè°­åšå®¢</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">å¯¼èˆª</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">å¤§å‰ç«¯</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>åŸºç¡€</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/passages/2019-03-26-javascript-first/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/passages/2019-04-09-es6/" class="nav-link router-link-exact-active router-link-active">ES6</a></li><li class="dropdown-subitem"><a href="/passages/2019-04-10-html5-drag-drop/" class="nav-link">HTML5</a></li><li class="dropdown-subitem"><a href="/passages/2019-05-15-browser/" class="nav-link">æµè§ˆå™¨ä¸å®‰å…¨</a></li></ul></li><li class="dropdown-item"><!----> <a href="/passages/2019-05-18-serverless-page-counter/" class="nav-link">äº‘å¼€å‘æŠ€æœ¯</a></li><li class="dropdown-item"><h4>Node</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/passages/2019-05-07-play-node-shell/" class="nav-link">å‘½ä»¤è¡Œäº¤äº’</a></li><li class="dropdown-subitem"><a href="/passages/2019-05-04-jest-base/" class="nav-link">æµ‹è¯•</a></li><li class="dropdown-subitem"><a href="/passages/2019-05-02-node-block-chain/" class="nav-link">æºç æ¢ç´¢</a></li></ul></li><li class="dropdown-item"><h4>æ¡†æ¶å·¥å…·</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/passages/2018-07-29-webpack-demos-introduction/" class="nav-link">Webpack4æ•™ç¨‹</a></li><li class="dropdown-subitem"><a href="/passages/2019-04-08-react-components-communication/" class="nav-link">å¼€å‘å®æˆ˜</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">UIè®¾è®¡</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/passages/2018-06-05-border-sizing/" class="nav-link">CSS3</a></li><li class="dropdown-item"><!----> <a href="/passages/2019-05-17-why-i-stopped-using-sass/" class="nav-link">SCSS</a></li><li class="dropdown-item"><!----> <a href="/passages/2018-09-09-mysql-blog-ui/" class="nav-link">é¡¹ç›®å®æˆ˜</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">ç®—æ³•ä¿®ç‚¼</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>ç®—æ³•å’Œæ•°æ®ç»“æ„</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/passages/2019-06-23-algorithm-offer/" class="nav-link">JSç‰ˆÂ·å‰‘æŒ‡offer</a></li></ul></li><li class="dropdown-item"><h4>è®¾è®¡æ¨¡å¼</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/passages/2018-10-23-singleton-pattern/" class="nav-link">åˆ›å»ºå‹æ¨¡å¼</a></li><li class="dropdown-subitem"><a href="/passages/2018-12-16-flyweight-pattern/" class="nav-link">ç»“æ„å‹æ¨¡å¼</a></li><li class="dropdown-subitem"><a href="/passages/2018-11-25-command-pattern/" class="nav-link">è¡Œä¸ºå‹æ¨¡å¼</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">éšæ‰‹è®°</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/passages/2019-06-10-weekly-share/" class="nav-link">æ¯å‘¨åˆ†äº«</a></li><li class="dropdown-item"><!----> <a href="/passages/2018-09-06-git-tag-and-version/" class="nav-link">Gitæ‰‹å†Œ</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">äº†è§£æ›´å¤š</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">å‹æƒ…é“¾æ¥</a></li><li class="dropdown-item"><!----> <a href="/about/" class="nav-link">ç½‘ç«™ä¿¡æ¯</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/passages/2019-04-09-es6/" class="nav-link router-link-exact-active router-link-active">zh-CN</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">en-US</a></li></ul></div></div> <a href="https://github.com/dongyuanxin/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">å¯¼èˆª</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">å¤§å‰ç«¯</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>åŸºç¡€</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/passages/2019-03-26-javascript-first/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/passages/2019-04-09-es6/" class="nav-link router-link-exact-active router-link-active">ES6</a></li><li class="dropdown-subitem"><a href="/passages/2019-04-10-html5-drag-drop/" class="nav-link">HTML5</a></li><li class="dropdown-subitem"><a href="/passages/2019-05-15-browser/" class="nav-link">æµè§ˆå™¨ä¸å®‰å…¨</a></li></ul></li><li class="dropdown-item"><!----> <a href="/passages/2019-05-18-serverless-page-counter/" class="nav-link">äº‘å¼€å‘æŠ€æœ¯</a></li><li class="dropdown-item"><h4>Node</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/passages/2019-05-07-play-node-shell/" class="nav-link">å‘½ä»¤è¡Œäº¤äº’</a></li><li class="dropdown-subitem"><a href="/passages/2019-05-04-jest-base/" class="nav-link">æµ‹è¯•</a></li><li class="dropdown-subitem"><a href="/passages/2019-05-02-node-block-chain/" class="nav-link">æºç æ¢ç´¢</a></li></ul></li><li class="dropdown-item"><h4>æ¡†æ¶å·¥å…·</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/passages/2018-07-29-webpack-demos-introduction/" class="nav-link">Webpack4æ•™ç¨‹</a></li><li class="dropdown-subitem"><a href="/passages/2019-04-08-react-components-communication/" class="nav-link">å¼€å‘å®æˆ˜</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">UIè®¾è®¡</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/passages/2018-06-05-border-sizing/" class="nav-link">CSS3</a></li><li class="dropdown-item"><!----> <a href="/passages/2019-05-17-why-i-stopped-using-sass/" class="nav-link">SCSS</a></li><li class="dropdown-item"><!----> <a href="/passages/2018-09-09-mysql-blog-ui/" class="nav-link">é¡¹ç›®å®æˆ˜</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">ç®—æ³•ä¿®ç‚¼</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>ç®—æ³•å’Œæ•°æ®ç»“æ„</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/passages/2019-06-23-algorithm-offer/" class="nav-link">JSç‰ˆÂ·å‰‘æŒ‡offer</a></li></ul></li><li class="dropdown-item"><h4>è®¾è®¡æ¨¡å¼</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/passages/2018-10-23-singleton-pattern/" class="nav-link">åˆ›å»ºå‹æ¨¡å¼</a></li><li class="dropdown-subitem"><a href="/passages/2018-12-16-flyweight-pattern/" class="nav-link">ç»“æ„å‹æ¨¡å¼</a></li><li class="dropdown-subitem"><a href="/passages/2018-11-25-command-pattern/" class="nav-link">è¡Œä¸ºå‹æ¨¡å¼</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">éšæ‰‹è®°</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/passages/2019-06-10-weekly-share/" class="nav-link">æ¯å‘¨åˆ†äº«</a></li><li class="dropdown-item"><!----> <a href="/passages/2018-09-06-git-tag-and-version/" class="nav-link">Gitæ‰‹å†Œ</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">äº†è§£æ›´å¤š</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">å‹æƒ…é“¾æ¥</a></li><li class="dropdown-item"><!----> <a href="/about/" class="nav-link">ç½‘ç«™ä¿¡æ¯</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/passages/2019-04-09-es6/" class="nav-link router-link-exact-active router-link-active">zh-CN</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">en-US</a></li></ul></div></div> <a href="https://github.com/dongyuanxin/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>ES6</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/passages/2018-05-23-es-promise/" class="sidebar-link">Promise æ¦‚è¿°</a></li><li><a href="/passages/2019-04-09-es6/" class="active sidebar-link">ES6é‡éš¾ç‚¹æ•´ç†</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/passages/2018-05-29-promise-async-await-order/" class="sidebar-link">è°ˆè°ˆpromise/async/awaitçš„æ‰§è¡Œé¡ºåºä¸V8å¼•æ“çš„BUG</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML5</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æµè§ˆå™¨ä¸å®‰å…¨</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å¼€å‘å®æˆ˜</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>ğŸ‘‡ å†…å®¹é€Ÿè§ˆ ğŸ‘‡</p> <ul><li>let å’Œ const</li> <li>Set å’Œ Map</li> <li>Generator å’Œ yield</li> <li>Promiseã€async/await ä»‹ç»</li> <li>Proxy ä»£ç†å™¨</li> <li>...</li></ul> <h3 id="let-å’Œ-const"><a href="#let-å’Œ-const" aria-hidden="true" class="header-anchor">#</a> let å’Œ const</h3> <p>ES6 æ–°å¢äº†<code>let</code>å’Œ<code>const</code>ï¼Œå®ƒä»¬å£°æ˜çš„å˜é‡ï¼Œéƒ½å¤„äºâ€œå—çº§ä½œç”¨åŸŸâ€ã€‚å¹¶ä¸”ä¸å­˜åœ¨â€œå˜é‡æå‡â€ï¼Œä¸å…è®¸é‡å¤å£°æ˜ã€‚</p> <p>åŒæ—¶ï¼Œ<code>const</code>å£°æ˜çš„å˜é‡æ‰€æŒ‡å‘çš„å†…å­˜åœ°å€ä¿å­˜çš„æ•°æ®ä¸å¾—æ”¹å˜ï¼š</p> <ul><li>å¯¹äºç®€å•ç±»å‹çš„æ•°æ®ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ï¼‰ï¼Œå€¼å°±ä¿å­˜åœ¨å˜é‡æŒ‡å‘çš„é‚£ä¸ªå†…å­˜åœ°å€ï¼Œå› æ­¤ç­‰åŒäºå¸¸é‡ã€‚</li> <li>å¯¹äºå¤åˆç±»å‹çš„æ•°æ®ï¼ˆä¸»è¦æ˜¯å¯¹è±¡å’Œæ•°ç»„ï¼‰ï¼Œå˜é‡æŒ‡å‘çš„å†…å­˜åœ°å€ï¼Œä¿å­˜çš„åªæ˜¯ä¸€ä¸ªæŒ‡å‘å®é™…æ•°æ®çš„æŒ‡é’ˆï¼Œ<code>const</code>åªèƒ½ä¿è¯è¿™ä¸ªæŒ‡é’ˆæ˜¯å›ºå®šçš„ï¼ˆå³æ€»æ˜¯æŒ‡å‘å¦ä¸€ä¸ªå›ºå®šçš„åœ°å€ï¼‰ï¼Œä¸èƒ½ä¿è¯æŒ‡å‘çš„æ•°æ®ç»“æ„ä¸å¯å˜ã€‚</li></ul> <p>å¦‚æœè¦ä¿è¯æŒ‡å‘çš„æ•°æ®ç»“æ„ä¹Ÿä¸å¯å˜ï¼Œéœ€è¦è‡ªè¡Œå°è£…ï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
 * å†»ç»“å¯¹è±¡
 * @param {Object} obj
 * @return {Object}
 */</span>
<span class="token keyword">function</span> <span class="token function">constantize</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">isFrozen</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¦‚æœå±æ€§æ˜¯å¯¹è±¡ï¼Œé€’å½’å†»ç»“</span>
    <span class="token keyword">typeof</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">constantize</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/********æµ‹è¯•ä»£ç  **********/</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  b<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    c<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    d<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      a<span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  d<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> fronzenObj <span class="token operator">=</span> <span class="token function">constantize</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
  fronzenObj<span class="token punctuation">.</span>d <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  fronzenObj<span class="token punctuation">.</span>b<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h3 id="set-å’Œ-map"><a href="#set-å’Œ-map" aria-hidden="true" class="header-anchor">#</a> Set å’Œ Map</h3> <blockquote><p>é¢˜ç›®ï¼šè§£é‡Šä¸‹<code>Set</code>å’Œ<code>Map</code>ã€‚</p></blockquote> <ul><li>Set å…ƒç´ ä¸å…è®¸é‡å¤</li> <li>Map ç±»ä¼¼å¯¹è±¡ï¼Œä½†æ˜¯å®ƒçš„é”®ï¼ˆkeyï¼‰å¯ä»¥æ˜¯ä»»æ„æ•°æ®ç±»å‹</li></ul> <p><strong>â‘ Set å¸¸ç”¨æ–¹æ³•</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// å®ä¾‹åŒ–ä¸€ä¸ªset</span>
<span class="token keyword">const</span> <span class="token keyword">set</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// éå†set</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> <span class="token keyword">set</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ·»åŠ å…ƒç´ ï¼Œè¿”å›Setæœ¬èº«</span>
<span class="token keyword">set</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Setå¤§å°</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">set</span><span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ£€æŸ¥å…ƒç´ å­˜åœ¨</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">set</span><span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// åˆ é™¤æŒ‡å®šå…ƒç´ ï¼Œè¿”å›bool</span>
<span class="token keyword">let</span> success <span class="token operator">=</span> <span class="token keyword">set</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>success<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">set</span><span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>å…¶ä»–éå†æ–¹æ³•ï¼šç”±äºæ²¡æœ‰é”®åï¼Œ<code>values()</code>å’Œ<code>keys()</code>è¿”å›åŒæ ·ç»“æœã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> <span class="token keyword">set</span><span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> <span class="token keyword">set</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> <span class="token keyword">set</span><span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>â‘¡Map å¸¸ç”¨æ–¹æ³•</strong></p> <p>Map æ¥å£åŸºæœ¬å’Œ Set ä¸€è‡´ã€‚ä¸åŒçš„æ˜¯å¢åŠ æ–°å…ƒç´ çš„ API æ˜¯ï¼š<code>set(key, value)</code></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ä»¥ä»»æ„å¯¹è±¡ä¸º Key å€¼</span>
<span class="token comment">// è¿™é‡Œä»¥ Date å¯¹è±¡ä¸ºä¾‹</span>
<span class="token keyword">let</span> key <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token string">&quot;today&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="generator-ä¸-yield"><a href="#generator-ä¸-yield" aria-hidden="true" class="header-anchor">#</a> Generator ä¸ yield</h3> <p><code>generator</code>å‡½æ•°æ˜¯ es6 æä¾›çš„æ–°ç‰¹æ€§ï¼Œå®ƒçš„æœ€å¤§ç‰¹ç‚¹æ˜¯ï¼š<strong>æ§åˆ¶å‡½æ•°çš„æ‰§è¡Œ</strong>ã€‚è®©æˆ‘ä»¬ä»ç½‘ä¸Šæœ€ç«çš„ä¸€ä¸ªä¾‹å­æ¥çœ‹ï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">yield</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> z <span class="token operator">=</span> <span class="token keyword">yield</span> y <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
b<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { value:6, done:false }</span>
b<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { value:8, done:false }</span>
b<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { value:42, done:true }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>é€šä¿—çš„è§£é‡Šä¸‹ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§è¾“å‡ºï¼š</p> <ol><li>ç»™å‡½æ•° foo ä¼ å…¥å‚æ•° 5ï¼Œä½†ç”±äºå®ƒæ˜¯ generatorï¼Œæ‰€ä»¥æ‰§è¡Œåˆ°<strong>ç¬¬ä¸€ä¸ª yield å‰</strong>å°±åœæ­¢äº†ã€‚</li> <li>ç¬¬ä¸€æ¬¡è°ƒç”¨ next()ï¼Œ<strong>è¿™æ¬¡ä¼ å…¥çš„å‚æ•°ä¼šè¢«å¿½ç•¥</strong>æš‚åœ**ã€‚</li> <li>ç¬¬äºŒæ¬¡è°ƒç”¨ next(12)ï¼Œ<strong>ä¼ å…¥çš„å‚æ•°ä¼šè¢«å½“ä½œä¸Šä¸€ä¸ª yield è¡¨è¾¾å¼çš„è¿”å›å€¼</strong>ã€‚å› æ­¤ï¼Œy = 2 * 12 = 24ã€‚æ‰§è¡Œåˆ°ç¬¬äºŒä¸ª yieldï¼Œè¿”å›å…¶åçš„è¡¨è¾¾å¼çš„å€¼ 24 / 3 = 8ã€‚ç„¶åå‡½æ•°åœ¨æ­¤å¤„æš‚åœã€‚</li> <li>ç¬¬ä¸‰æ¬¡è°ƒç”¨ next(13)ï¼Œæ²¡æœ‰ yieldï¼Œåªå‰© return äº†ï¼ŒæŒ‰ç…§æ­£å¸¸å‡½æ•°é‚£æ ·è¿”å› return çš„è¡¨è¾¾å¼çš„å€¼ï¼Œå¹¶ä¸”<code>done</code>ä¸º<code>true</code>ã€‚</li></ol> <p><strong>éš¾ç‚¹</strong>ï¼šåœ¨äºä¸ºä»€ä¹ˆæœ€åçš„<code>value</code>æ˜¯ 42 å‘¢ï¼Ÿ</p> <p>é¦–å…ˆï¼Œ<code>x</code>çš„å€¼æ˜¯åˆšå¼€å§‹è°ƒç”¨ foo å‡½æ•°ä¼ å…¥çš„ 5ã€‚è€Œæœ€åä¼ å…¥çš„ 13 è¢«å½“ä½œç¬¬äºŒä¸ª yield çš„è¿”å›å€¼ï¼Œæ‰€ä»¥<code>z</code>çš„å€¼æ˜¯ 13ã€‚å¯¹äº<code>y</code>çš„å€¼ï¼Œæˆ‘ä»¬åœ¨å‰é¢ç¬¬ä¸‰æ­¥ä¸­å·²ç»è®¡ç®—å‡ºæ¥äº†ï¼Œå°±æ˜¯ 24ã€‚</p> <p>æ‰€ä»¥ï¼Œ<code>x + y + z = 5 + 24 + 13 = 42</code></p> <p>çœ‹æ‡‚äº†ä¸Šé¢çš„åˆ†æï¼Œå†çœ‹ä¸‹é¢è¿™æ®µä»£ç å°±å¾ˆå¥½ç†è§£äº†ï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">yield</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> z <span class="token operator">=</span> <span class="token keyword">yield</span> y <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Object{value:6, done:false}</span>
a<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Object{value:NaN, done:false}</span>
a<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Object{value:NaN, done:true}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>åªæœ‰ç¬¬ä¸€æ¬¡è°ƒç”¨ next å‡½æ•°çš„æ—¶å€™ï¼Œè¾“å‡ºçš„ value æ˜¯ 6ã€‚å…¶ä»–æ—¶å€™ç”±äºæ²¡æœ‰ç»™ next ä¼ å…¥å‚æ•°ï¼Œå› æ­¤ yield çš„è¿”å›å€¼éƒ½æ˜¯<code>undefined</code>ï¼Œè¿›è¡Œè¿ç®—åè‡ªç„¶æ˜¯<code>NaN</code>ã€‚</p> <h3 id="promise-ä»‹ç»"><a href="#promise-ä»‹ç»" aria-hidden="true" class="header-anchor">#</a> Promise ä»‹ç»</h3> <p>ç®€å•å½’çº³ä¸‹ Promiseï¼š<strong>ä¸‰ä¸ªçŠ¶æ€ã€ä¸¤ä¸ªè¿‡ç¨‹ã€ä¸€ä¸ªæ–¹æ³•</strong></p> <ul><li>ä¸‰ä¸ªçŠ¶æ€ï¼š<code>pending</code>ã€<code>fulfilled</code>ã€<code>rejected</code></li> <li>ä¸¤ä¸ªè¿‡ç¨‹ï¼ˆ<strong>å•å‘ä¸å¯é€†</strong>ï¼‰ï¼š
<ul><li><code>pending</code>-&gt;<code>fulfilled</code></li> <li><code>pending</code>-&gt;<code>rejected</code></li></ul></li> <li>ä¸€ä¸ªæ–¹æ³•<code>then</code>ï¼š<code>Promise</code>æœ¬è´¨ä¸Šåªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œ<code>catch</code>å’Œ<code>all</code>æ–¹æ³•éƒ½æ˜¯åŸºäº<code>then</code>æ–¹æ³•å®ç°çš„ã€‚</li></ul> <p>è¯·çœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// æ„é€  Promise æ—¶å€™, å†…éƒ¨å‡½æ•°ç«‹å³æ‰§è¡Œ</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;new Promise&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;finifsh&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//  then ä¸­ ä½¿ç”¨äº† returnï¼Œé‚£ä¹ˆ return çš„å€¼ä¼šè¢« Promise.resolve() åŒ…è£…</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 1</span>
    <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// åŒ…è£…æˆ Promise.resolve(2)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 2</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="async-await-ä»‹ç»"><a href="#async-await-ä»‹ç»" aria-hidden="true" class="header-anchor">#</a> async/await ä»‹ç»</h3> <p><code>async</code>å‡½æ•°è¿”å›ä¸€ä¸ª<code>Promise</code>å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨<code>then</code>æ–¹æ³•æ·»åŠ å›è°ƒå‡½æ•°ã€‚</p> <p>å½“å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€æ—¦é‡åˆ°<code>await</code>å°±ä¼šå…ˆè¿”å›ï¼Œç­‰åˆ°å¼‚æ­¥æ“ä½œå®Œæˆï¼Œå†æ¥ç€æ‰§è¡Œå‡½æ•°ä½“å†…åé¢çš„è¯­å¥ã€‚</p> <p>è¿™ä¹Ÿæ˜¯å®ƒæœ€å—æ¬¢è¿çš„åœ°æ–¹ï¼š<strong>èƒ½è®©å¼‚æ­¥ä»£ç å†™èµ·æ¥åƒåŒæ­¥ä»£ç ï¼Œå¹¶ä¸”æ–¹ä¾¿æ§åˆ¶é¡ºåº</strong>ã€‚</p> <p>å¯ä»¥åˆ©ç”¨å®ƒå®ç°ä¸€ä¸ª<code>sleep</code>å‡½æ•°é˜»å¡è¿›ç¨‹ï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token parameter">millisecond</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> resolve<span class="token punctuation">,</span> millisecond<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * ä»¥ä¸‹æ˜¯æµ‹è¯•ä»£ç 
 */</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç¡çœ 1ç§’</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰§è¡Œæµ‹è¯•å‡½æ•°</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>è™½ç„¶æ–¹ä¾¿ï¼Œ<strong>ä½†æ˜¯å®ƒä¹Ÿä¸èƒ½å–ä»£<code>Promise</code>ï¼Œå°¤å…¶æ˜¯æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ç”¨<code>Promise.all()</code>æ¥å®ç°å¹¶å‘</strong>ï¼Œè€Œ<code>async/await</code>åªèƒ½å®ç°ä¸²è¡Œã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token parameter">second</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> second<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">chuanXingDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">bingXingDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> tasks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    tasks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>tasks<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>è¿è¡Œ<code>bingXingDemo()</code>ï¼Œå‡ ä¹åŒæ—¶è¾“å‡ºï¼Œå®ƒæ˜¯å¹¶å‘æ‰§è¡Œï¼›è¿è¡Œ<code>chuanXingDemo()</code>ï¼Œæ¯ä¸ªè¾“å‡ºé—´éš” 1sï¼Œå®ƒæ˜¯ä¸²è¡Œæ‰§è¡Œã€‚</p> <h3 id="es6-å¯¹è±¡å’Œ-es5-å¯¹è±¡"><a href="#es6-å¯¹è±¡å’Œ-es5-å¯¹è±¡" aria-hidden="true" class="header-anchor">#</a> ES6 å¯¹è±¡å’Œ ES5 å¯¹è±¡</h3> <blockquote><p>é¢˜ç›®ï¼šes6 class çš„ new å®ä¾‹å’Œ es5 çš„ new å®ä¾‹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p></blockquote> <p>åœ¨<code>ES6</code>ä¸­ï¼ˆå’Œ<code>ES5</code>ç›¸æ¯”ï¼‰ï¼Œ<code>class</code>çš„<code>new</code>å®ä¾‹æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p> <ul><li><code>class</code>çš„æ„é€ å‚æ•°å¿…é¡»æ˜¯<code>new</code>æ¥è°ƒç”¨ï¼Œä¸å¯ä»¥å°†å…¶ä½œä¸ºæ™®é€šå‡½æ•°æ‰§è¡Œ</li> <li><code>es6</code> çš„<code>class</code>ä¸å­˜åœ¨å˜é‡æå‡</li> <li><strong>æœ€é‡è¦çš„æ˜¯ï¼šes6 å†…éƒ¨æ–¹æ³•ä¸å¯ä»¥æšä¸¾</strong>ã€‚es5 çš„<code>prototype</code>ä¸Šçš„æ–¹æ³•å¯ä»¥æšä¸¾ã€‚</li></ul> <p>ä¸ºæ­¤æˆ‘åšäº†ä»¥ä¸‹æµ‹è¯•ä»£ç è¿›è¡ŒéªŒè¯ï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">ES5Class</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// es5:å¯ä»¥ç›´æ¥ä½œä¸ºå‡½æ•°è¿è¡Œ</span>
<span class="token comment">// console.log(new ES6Class()) // ä¼šæŠ¥é”™ï¼šä¸å­˜åœ¨å˜é‡æå‡</span>

<span class="token keyword">function</span> <span class="token function">ES5Class</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">ES5Class</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">func</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ES6Class</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> es5 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ES5Class</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> es6 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ES6Class</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ¨èåœ¨å¾ªç¯å¯¹è±¡å±æ€§çš„æ—¶å€™ï¼Œä½¿ç”¨for...in</span>
<span class="token comment">// åœ¨éå†æ•°ç»„çš„æ—¶å€™çš„æ—¶å€™ï¼Œä½¿ç”¨for...of</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ES5 :&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> _ <span class="token keyword">in</span> es5<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// es6:ä¸å¯æšä¸¾</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ES6 :&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> _ <span class="token keyword">in</span> es6<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p><strong>å‚è€ƒ/æ¨è</strong>ï¼š<a href="https://fed.renren.com/2017/08/07/js-oop-es52es6/" target="_blank" rel="noopener noreferrer">ã€ŠJavaScript åˆ›å»ºå¯¹è±¡â€”ä» es5 åˆ° es6ã€‹<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="proxy-ä»£ç†å™¨"><a href="#proxy-ä»£ç†å™¨" aria-hidden="true" class="header-anchor">#</a> Proxy ä»£ç†å™¨</h3> <p>ä»–å¯ä»¥å®ç° js ä¸­çš„â€œå…ƒç¼–ç¨‹â€ï¼šåœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æ¶è®¾æ‹¦æˆªï¼Œå¯ä»¥è¿‡æ»¤å’Œä¿®æ”¹å¤–éƒ¨çš„è®¿é—®ã€‚</p> <p>å®ƒæ”¯æŒå¤šè¾¾ 13 ç§æ‹¦æˆªæ“ä½œï¼Œä¾‹å¦‚ä¸‹é¢ä»£ç å±•ç¤ºçš„<code>set</code>å’Œ<code>get</code>æ–¹æ³•ï¼Œåˆ†åˆ«å¯ä»¥åœ¨è®¾ç½®å¯¹è±¡å±æ€§å’Œè®¿é—®å¯¹è±¡å±æ€§æ—¶å€™è¿›è¡Œæ‹¦æˆªã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// receiver æŒ‡å‘ proxy å®ä¾‹</span>
  <span class="token keyword">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> property<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`GET: target is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>target<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, property is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>property<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> property<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> property<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`SET: target is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>target<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, property is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>property<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> property<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token punctuation">{</span> c<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> d<span class="token punctuation">:</span> <span class="token punctuation">{</span> e<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * ä»¥ä¸‹æ˜¯æµ‹è¯•ä»£ç 
 */</span>

newObj<span class="token punctuation">.</span>a<span class="token punctuation">;</span> <span class="token comment">// output: GET...</span>
newObj<span class="token punctuation">.</span>b<span class="token punctuation">.</span>c<span class="token punctuation">;</span> <span class="token comment">// output: GET...</span>

newObj<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span> <span class="token comment">// output: SET...</span>
newObj<span class="token punctuation">.</span>b<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// output: GET...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>è¿è¡Œè¿™æ®µä»£ç ï¼Œä¼šå‘ç°æœ€åä¸€è¡Œçš„è¾“å‡ºæ˜¯ <code>GET ...</code>ã€‚ä¹Ÿå°±æ˜¯è¯´å®ƒè§¦å‘çš„æ˜¯<code>get</code>æ‹¦æˆªå™¨ï¼Œè€Œä¸æ˜¯æœŸæœ›çš„<code>set</code>æ‹¦æˆªå™¨ã€‚<strong>è¿™æ˜¯å› ä¸ºå¯¹äºå¯¹è±¡çš„æ·±å±‚å±æ€§ï¼Œéœ€è¦ä¸“é—¨å¯¹å…¶è®¾ç½® Proxy</strong>ã€‚</p> <p><strong>æ›´å¤šè¯·è§</strong>ï¼š<a href="http://es6.ruanyifeng.com/#docs/proxy" target="_blank" rel="noopener noreferrer">ã€Šé˜®ä¸€å³° ES6 å…¥é—¨ï¼šProxyã€‹<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="esmodule-å’Œ-commonjs-çš„æ¯”è¾ƒ"><a href="#esmodule-å’Œ-commonjs-çš„æ¯”è¾ƒ" aria-hidden="true" class="header-anchor">#</a> EsModule å’Œ CommonJS çš„æ¯”è¾ƒ</h3> <p>ç›®å‰ js ç¤¾åŒºæœ‰ 4 ç§æ¨¡å—ç®¡ç†è§„èŒƒï¼šAMDã€CMDã€CommonJS å’Œ EsModuleã€‚ ES Module æ˜¯åŸç”Ÿå®ç°çš„æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œä¸ CommonJS æœ‰ä»¥ä¸‹å‡ ä¸ªåŒºåˆ«ï¼š</p> <ul><li>CommonJS æ”¯æŒåŠ¨æ€å¯¼å…¥ï¼Œä¹Ÿå°±æ˜¯ <code>require(${path}/xx.js)</code>ï¼Œåè€…ç›®å‰ä¸æ”¯æŒï¼Œä½†æ˜¯å·²æœ‰ææ¡ˆï¼š<code>import(xxx)</code></li> <li>CommonJS æ˜¯åŒæ­¥å¯¼å…¥ï¼Œå› ä¸ºç”¨äºæœåŠ¡ç«¯ï¼Œæ–‡ä»¶éƒ½åœ¨æœ¬åœ°ï¼ŒåŒæ­¥å¯¼å…¥å³ä½¿å¡ä½ä¸»çº¿ç¨‹å½±å“ä¹Ÿä¸å¤§ã€‚è€Œåè€…æ˜¯å¼‚æ­¥å¯¼å…¥ï¼Œå› ä¸ºç”¨äºæµè§ˆå™¨ï¼Œéœ€è¦ä¸‹è½½æ–‡ä»¶ï¼Œå¦‚æœä¹Ÿé‡‡ç”¨åŒæ­¥å¯¼å…¥ä¼šå¯¹æ¸²æŸ“æœ‰å¾ˆå¤§å½±å“</li> <li>commonJs è¾“å‡ºçš„æ˜¯å€¼çš„æµ…æ‹·è´ï¼ŒesModule è¾“å‡ºå€¼çš„å¼•ç”¨</li> <li>ES Module ä¼šç¼–è¯‘æˆ <code>require/exports</code> æ¥æ‰§è¡Œçš„</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/dongyuanxin/blog/edit/master/å‰ç«¯çŸ¥è¯†ä½“ç³»/es6/ES6é‡éš¾ç‚¹æ•´ç†.md" target="_blank" rel="noopener noreferrer">åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">æ›´æ–°äº: </span> <span class="time">2019-5-28 11:32:12</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/passages/2018-05-23-es-promise/" class="prev">
          Promise æ¦‚è¿°
        </a></span> <span class="next"><a href="/passages/2018-05-29-promise-async-await-order/">
          è°ˆè°ˆpromise/async/awaitçš„æ‰§è¡Œé¡ºåºä¸V8å¼•æ“çš„BUG
        </a>
        â†’
      </span></p></div> </main></div><div class="global-ui"><!----><!----><div></div></div></div>
    <script src="/assets/js/app.98e72b6c.js" defer></script><script src="/assets/js/2.15ea491b.js" defer></script><script src="/assets/js/48.2b8b3908.js" defer></script><script src="/assets/js/3.fcfbf359.js" defer></script>
  </body>
</html>
