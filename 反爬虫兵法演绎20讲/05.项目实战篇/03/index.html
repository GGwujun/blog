<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="/logo.png" />
    <link rel="stylesheet" href="/blog/umi.css" />
    <script>
      window.routerBase = "/blog";
    </script>
    <script>
      //! umi version: 3.5.17
    </script>
    <script>
      !(function () {
        var e = localStorage.getItem("dumi:prefers-color"),
          t = window.matchMedia("(prefers-color-scheme: dark)").matches,
          r = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === r[2] ? (t ? r[1] : r[0]) : r.indexOf(e) > -1 ? e : r[0]
        );
      })();
    </script>
    <title>16 | 验证爬虫：我到底要不要百分百投入？</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/反爬虫兵法演绎20讲/05.项目实战篇/03" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog/">大师兄</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><span>计算机基础<ul><li><a href="/blog/编译原理之美">编译原理之美</a></li><li><a href="/blog/编译原理实战">编译原理实战</a></li><li><a href="/blog/深入浅出计算机组成原理">深入浅出计算机组成原理</a></li><li><a href="/blog/详解http">详解http</a></li><li><a href="/blog/计算机网络通关29讲">计算机网络通关29讲</a></li><li><a href="/blog/网络排查案例课">网络排查案例课</a></li><li><a href="/blog/linux操作系统">linux操作系统</a></li><li><a href="/blog/linux性能优化实战">linux性能优化实战</a></li><li><a href="/blog/程序员数学基础">程序员数学基础</a></li><li><a href="/blog/趣谈网络协议">趣谈网络协议</a></li><li><a href="/blog/操作系统实战">操作系统实战</a></li><li><a href="/blog/软件工程之美">软件工程之美</a></li><li><a href="/blog/sql必知必会">sql必知必会</a></li><li><a href="/blog/操作系统实战45讲">操作系统实战45讲</a></li><li><a href="/blog/网络编程实战">网络编程实战</a></li></ul></span><span>算法<ul><li><a href="/blog/常用算法25讲">常用算法25讲</a></li><li><a href="/blog/数据结构与算法之美">数据结构与算法之美</a></li><li><a href="/blog/业务开发算法50讲">业务开发算法50讲</a></li><li><a href="/blog/动态规划面试宝典">动态规划面试宝典</a></li></ul></span><span>前端开发<ul><li><a href="/blog/浏览器工作原理与实践">浏览器工作原理与实践</a></li><li><a href="/blog/新时代产品经理进阶之路">新时代产品经理进阶之路</a></li><li><a href="/blog/全栈工程师修炼指南">全栈工程师修炼指南</a></li><li><a href="/blog/flutter核心技术与实战">flutter核心技术与实战</a></li><li><a href="/blog/java-script核心原理解析">java-script核心原理解析</a></li><li><a href="/blog/说透低代码">说透低代码</a></li><li><a href="/blog/nodejs应用开发实战">nodejs应用开发实战</a></li><li><a aria-current="page" class="active" href="/blog/反爬虫兵法演绎20讲">反爬虫兵法演绎20讲</a></li><li><a href="/blog/reactnative新架构实战课">reactnative新架构实战课</a></li><li><a href="/blog/正则表达式入门">正则表达式入门</a></li><li><a href="/blog/重学前端">重学前端</a></li><li><a href="/blog/serverless入门课">serverless入门课</a></li><li><a href="/blog/type-script入门实战笔记">type-script入门实战笔记</a></li><li><a href="/blog/图解googlev8">图解googlev8</a></li><li><a href="/blog/vue3源码分析">vue3源码分析</a></li><li><a href="/blog/玩转Vue3全家桶">玩转Vue3全家桶</a></li><li><a href="/blog/webassembly入门">webassembly入门</a></li><li><a href="/blog/手把手带你写一个Web框架">手把手带你写一个Web框架</a></li><li><a href="/blog/web漏洞挖掘实战">web漏洞挖掘实战</a></li><li><a href="/blog/跟月影学可视化">跟月影学可视化</a></li><li><a href="/blog/搞定音频技术">搞定音频技术</a></li><li><a href="/blog/攻克视频技术">攻克视频技术</a></li></ul></span><span>前端工程化<ul><li><a href="/blog/logger">logger</a></li><li><a href="/blog/webpack">webpack</a></li><li><a href="/blog/webpackChain">webpackChain</a></li></ul></span><span>前端性能优化<ul><li><a href="/blog/react性能调优">react性能调优</a></li></ul></span><span>软件测试<ul><li><a href="/blog/全链路压测实战30讲">全链路压测实战30讲</a></li><li><a href="/blog/性能测试实战30讲">性能测试实战30讲</a></li><li><a href="/blog/自动化测试高手课">自动化测试高手课</a></li><li><a href="/blog/软件测试52讲">软件测试52讲</a></li></ul></span><span>面试<ul><li><a href="/blog/面试现场">面试现场</a></li></ul></span><span>杂谈<ul><li><a href="/blog/超级访谈对话张雪峰">超级访谈对话张雪峰</a></li><li><a href="/blog/Git实战手册">Git实战手册</a></li><li><a href="/blog/NodeJS">NodeJS</a></li><li><a href="/blog/ReactJS">ReactJS</a></li><li><a href="/blog/UI设计">UI设计</a></li><li><a href="/blog/webpack4系列教程">webpack4系列教程</a></li><li><a href="/blog/前端知识体系">前端知识体系</a></li><li><a href="/blog/剑指offer刷题笔记">剑指offer刷题笔记</a></li><li><a href="/blog/思考与成长">思考与成长</a></li><li><a href="/blog/设计模式手册">设计模式手册</a></li></ul></span><div class="__dumi-default-navbar-tool"><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "></div></div></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog/"></a><h1>大师兄</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li>计算机基础<ul><li><a href="/blog/编译原理之美">编译原理之美</a></li><li><a href="/blog/编译原理实战">编译原理实战</a></li><li><a href="/blog/深入浅出计算机组成原理">深入浅出计算机组成原理</a></li><li><a href="/blog/详解http">详解http</a></li><li><a href="/blog/计算机网络通关29讲">计算机网络通关29讲</a></li><li><a href="/blog/网络排查案例课">网络排查案例课</a></li><li><a href="/blog/linux操作系统">linux操作系统</a></li><li><a href="/blog/linux性能优化实战">linux性能优化实战</a></li><li><a href="/blog/程序员数学基础">程序员数学基础</a></li><li><a href="/blog/趣谈网络协议">趣谈网络协议</a></li><li><a href="/blog/操作系统实战">操作系统实战</a></li><li><a href="/blog/软件工程之美">软件工程之美</a></li><li><a href="/blog/sql必知必会">sql必知必会</a></li><li><a href="/blog/操作系统实战45讲">操作系统实战45讲</a></li><li><a href="/blog/网络编程实战">网络编程实战</a></li></ul></li><li>算法<ul><li><a href="/blog/常用算法25讲">常用算法25讲</a></li><li><a href="/blog/数据结构与算法之美">数据结构与算法之美</a></li><li><a href="/blog/业务开发算法50讲">业务开发算法50讲</a></li><li><a href="/blog/动态规划面试宝典">动态规划面试宝典</a></li></ul></li><li>前端开发<ul><li><a href="/blog/浏览器工作原理与实践">浏览器工作原理与实践</a></li><li><a href="/blog/新时代产品经理进阶之路">新时代产品经理进阶之路</a></li><li><a href="/blog/全栈工程师修炼指南">全栈工程师修炼指南</a></li><li><a href="/blog/flutter核心技术与实战">flutter核心技术与实战</a></li><li><a href="/blog/java-script核心原理解析">java-script核心原理解析</a></li><li><a href="/blog/说透低代码">说透低代码</a></li><li><a href="/blog/nodejs应用开发实战">nodejs应用开发实战</a></li><li><a aria-current="page" class="active" href="/blog/反爬虫兵法演绎20讲">反爬虫兵法演绎20讲</a></li><li><a href="/blog/reactnative新架构实战课">reactnative新架构实战课</a></li><li><a href="/blog/正则表达式入门">正则表达式入门</a></li><li><a href="/blog/重学前端">重学前端</a></li><li><a href="/blog/serverless入门课">serverless入门课</a></li><li><a href="/blog/type-script入门实战笔记">type-script入门实战笔记</a></li><li><a href="/blog/图解googlev8">图解googlev8</a></li><li><a href="/blog/vue3源码分析">vue3源码分析</a></li><li><a href="/blog/玩转Vue3全家桶">玩转Vue3全家桶</a></li><li><a href="/blog/webassembly入门">webassembly入门</a></li><li><a href="/blog/手把手带你写一个Web框架">手把手带你写一个Web框架</a></li><li><a href="/blog/web漏洞挖掘实战">web漏洞挖掘实战</a></li><li><a href="/blog/跟月影学可视化">跟月影学可视化</a></li><li><a href="/blog/搞定音频技术">搞定音频技术</a></li><li><a href="/blog/攻克视频技术">攻克视频技术</a></li></ul></li><li>前端工程化<ul><li><a href="/blog/logger">logger</a></li><li><a href="/blog/webpack">webpack</a></li><li><a href="/blog/webpackChain">webpackChain</a></li></ul></li><li>前端性能优化<ul><li><a href="/blog/react性能调优">react性能调优</a></li></ul></li><li>软件测试<ul><li><a href="/blog/全链路压测实战30讲">全链路压测实战30讲</a></li><li><a href="/blog/性能测试实战30讲">性能测试实战30讲</a></li><li><a href="/blog/自动化测试高手课">自动化测试高手课</a></li><li><a href="/blog/软件测试52讲">软件测试52讲</a></li></ul></li><li>面试<ul><li><a href="/blog/面试现场">面试现场</a></li></ul></li><li>杂谈<ul><li><a href="/blog/超级访谈对话张雪峰">超级访谈对话张雪峰</a></li><li><a href="/blog/Git实战手册">Git实战手册</a></li><li><a href="/blog/NodeJS">NodeJS</a></li><li><a href="/blog/ReactJS">ReactJS</a></li><li><a href="/blog/UI设计">UI设计</a></li><li><a href="/blog/webpack4系列教程">webpack4系列教程</a></li><li><a href="/blog/前端知识体系">前端知识体系</a></li><li><a href="/blog/剑指offer刷题笔记">剑指offer刷题笔记</a></li><li><a href="/blog/思考与成长">思考与成长</a></li><li><a href="/blog/设计模式手册">设计模式手册</a></li></ul></li></ul><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "><button title="Dark theme" class="__dumi-default-dark-moon "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="22" height="22"><path d="M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z" p-id="3855"></path></svg></button><button title="Light theme" class="__dumi-default-dark-sun "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4026" width="22" height="22"><path d="M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z" p-id="4027"></path></svg></button><button title="Default to system" class="__dumi-default-dark-auto "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11002" width="22" height="22"><path d="M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z" p-id="11003"></path></svg></button></div></div></div><ul class="__dumi-default-menu-list"><li><a href="/blog/反爬虫兵法演绎20讲">反爬虫兵法演绎20讲</a></li><li><a href="/blog/反爬虫兵法演绎20讲/01.开篇词">01.开篇词</a><ul><li><a href="/blog/反爬虫兵法演绎20讲/01.开篇词/01"><span>开篇词 | 如何突破“爬虫反爬虫”内卷之怪现状？</span></a></li></ul></li><li><a href="/blog/反爬虫兵法演绎20讲/02.历史背景篇">02.历史背景篇</a><ul><li><a href="/blog/反爬虫兵法演绎20讲/02.历史背景篇/01"><span>01 | 爬虫需求的诞生：我们是正经的软件工程师</span></a></li><li><a href="/blog/反爬虫兵法演绎20讲/02.历史背景篇/02"><span>02 | 爬虫的内卷和黑化：我们变得不正经啦</span></a></li><li><a href="/blog/反爬虫兵法演绎20讲/02.历史背景篇/03"><span>03 | 反爬虫的发展以及展望：我们也不是什么正经工程师</span></a></li></ul></li><li><a href="/blog/反爬虫兵法演绎20讲/03.特别放送">03.特别放送</a><ul><li><a href="/blog/反爬虫兵法演绎20讲/03.特别放送/01"><span>春节加餐01 | 破解还是不破解，这是一个问题</span></a></li><li><a href="/blog/反爬虫兵法演绎20讲/03.特别放送/02"><span>春节加餐02 | 真实世界里，小心屠龙勇士变恶龙</span></a></li><li><a href="/blog/反爬虫兵法演绎20讲/03.特别放送/03"><span>春节加餐03 | 低调驶得万年船</span></a></li></ul></li><li><a href="/blog/反爬虫兵法演绎20讲/04.理论与实践案例篇">04.理论与实践案例篇</a><ul><li><a href="/blog/反爬虫兵法演绎20讲/04.理论与实践案例篇/01"><span>04 | 爬虫的首轮攻势：如何低调地拿到自己想要的数据？</span></a></li><li><a href="/blog/反爬虫兵法演绎20讲/04.理论与实践案例篇/02"><span>05 | 反爬虫的应对之策：通用且基本的检测规则是什么？</span></a></li><li><a href="/blog/反爬虫兵法演绎20讲/04.理论与实践案例篇/03"><span>06｜爬虫攻势升级：分布式的意义在哪里？</span></a></li><li><a href="/blog/反爬虫兵法演绎20讲/04.理论与实践案例篇/04"><span>07 | 反爬虫升级：如何判定你是个真人？</span></a></li><li><a href="/blog/反爬虫兵法演绎20讲/04.理论与实践案例篇/05"><span>加餐｜反爬虫的专家级鉴别力：用户习惯检测</span></a></li><li><a href="/blog/反爬虫兵法演绎20讲/04.理论与实践案例篇/06"><span>08 | 博弈的均衡：如何对抗道德的沦丧和人性的扭曲？</span></a></li><li><a href="/blog/反爬虫兵法演绎20讲/04.理论与实践案例篇/07"><span>09 | 反爬虫概述（一）：高收益的后端能做哪些基本的事情？</span></a></li><li><a href="/blog/反爬虫兵法演绎20讲/04.理论与实践案例篇/08"><span>10 | 反爬虫概述（二）：无收益的前端是怎么进行key处理的呢？</span></a></li><li><a href="/blog/反爬虫兵法演绎20讲/04.理论与实践案例篇/09"><span>11｜反爬虫概述（三）：前端反爬虫是怎么做信息收集的？</span></a></li><li><a href="/blog/反爬虫兵法演绎20讲/04.理论与实践案例篇/10"><span>答疑课堂｜爬虫反爬虫调试对抗技巧以及虚拟机详解</span></a></li><li><a href="/blog/反爬虫兵法演绎20讲/04.理论与实践案例篇/11"><span>12 | 反爬虫概述（四）：前后端都不合适的时候如何进行处理？</span></a></li><li><a href="/blog/反爬虫兵法演绎20讲/04.理论与实践案例篇/12"><span>13 | 反爬虫基础理论：这是唯一一节严肃的纯理论课</span></a></li></ul></li><li><a aria-current="page" class="active" href="/blog/反爬虫兵法演绎20讲/05.项目实战篇">05.项目实战篇</a><ul><li><a href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/01"><span>14 | 低耦合：如何快速下线反爬虫系统？</span></a></li><li><a href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/02"><span>15 | 规则引擎：如何快速响应突发的爬虫需求？</span></a></li><li><a aria-current="page" class="active" href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03"><span>16 | 验证爬虫：我到底要不要百分百投入？</span></a></li></ul></li><li><a href="/blog/反爬虫兵法演绎20讲/06.进阶篇">06.进阶篇</a><ul><li><a href="/blog/反爬虫兵法演绎20讲/06.进阶篇/01"><span>17 | 招聘篇：如何写一个合适的JD？</span></a></li><li><a href="/blog/反爬虫兵法演绎20讲/06.进阶篇/02"><span>18 | 如何搞定老板（上）：如何编造虚无缥缈的OKR？</span></a></li><li><a href="/blog/反爬虫兵法演绎20讲/06.进阶篇/03"><span>19 | 如何搞定老板（中）：如何组建团队</span></a></li><li><a href="/blog/反爬虫兵法演绎20讲/06.进阶篇/04"><span>20 | 如何搞定老板（下）：团队考核怎么做？</span></a></li></ul></li><li><a href="/blog/反爬虫兵法演绎20讲/07.结束语">07.结束语</a><ul><li><a href="/blog/反爬虫兵法演绎20讲/07.结束语/01"><span>结束语｜达到理想不太易</span></a></li><li><a href="/blog/反爬虫兵法演绎20讲/07.结束语/02"><span>结课测试｜反爬虫的“反人类”测试题，你能答对多少？</span></a></li></ul></li><li><a href="/blog/反爬虫兵法演绎20讲/summary">反爬虫兵法演绎20讲</a></li></ul></div></div><ul role="slug-list" class="__dumi-default-layout-toc"><li title="规则组合" data-depth="2"><a href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#规则组合"><span>规则组合</span></a></li><li title="规则整合" data-depth="3"><a href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#规则整合"><span>规则整合</span></a></li><li title="规则翻译" data-depth="3"><a href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#规则翻译"><span>规则翻译</span></a></li><li title="规则打分" data-depth="2"><a href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#规则打分"><span>规则打分</span></a></li><li title="规则分数计算" data-depth="3"><a href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#规则分数计算"><span>规则分数计算</span></a></li><li title="规则分数阈值问题" data-depth="3"><a href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#规则分数阈值问题"><span>规则分数阈值问题</span></a></li><li title="按规则随机跳过" data-depth="2"><a href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#按规则随机跳过"><span>按规则随机跳过</span></a></li><li title="按概率跳过" data-depth="3"><a href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#按概率跳过"><span>按概率跳过</span></a></li><li title="集群weight跳过" data-depth="3"><a href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#集群weight跳过"><span>集群weight跳过</span></a></li><li title="补充：按规则跳过" data-depth="3"><a href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#补充按规则跳过"><span>补充：按规则跳过</span></a></li><li title="概率的动态调整" data-depth="2"><a href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#概率的动态调整"><span>概率的动态调整</span></a></li><li title="规则白名单" data-depth="2"><a href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#规则白名单"><span>规则白名单</span></a></li><li title="指定区域白名单（IP，GPS）" data-depth="3"><a href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#指定区域白名单ipgps"><span>指定区域白名单（IP，GPS）</span></a></li><li title="指定用户白名单" data-depth="3"><a href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#指定用户白名单"><span>指定用户白名单</span></a></li><li title="小结" data-depth="2"><a href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#小结"><span>小结</span></a></li><li title="思考题" data-depth="2"><a href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#思考题"><span>思考题</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="16--验证爬虫我到底要不要百分百投入"><a aria-hidden="true" tabindex="-1" href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#16--验证爬虫我到底要不要百分百投入"><span class="icon icon-link"></span></a>16 | 验证爬虫：我到底要不要百分百投入？</h1><p>你好，我是DS Hunter，反爬虫专家，又见面了。</p><p>前面，我们讲了反爬虫的前置操作，例如快速下线的保命技巧，key生成的相关知识。那么这一讲，我们就谈谈反爬虫最终的核心诉求：验证爬虫。</p><p>实际上，在上一讲的规则引擎里面，我们已经对爬虫做了一些验证操作。但是，那里的验证只是简单的规则校验，还属于比较初级的校验。高级校验就要考虑得更多一些。</p><p>两者之间有什么不同呢？我们可以试试用不同的英文单词来区分两者。上一讲的验证，更多是validate，而这一讲，则更多是test or confirm。也就是说，这一讲的验证，并非单纯的校验客观上是否符合某种规定，更多的是检测、确认主观上是否是我们想要的。</p><p>那我们直接从规则组合的部分开始吧。</p><h2 id="规则组合"><a aria-hidden="true" tabindex="-1" href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#规则组合"><span class="icon icon-link"></span></a>规则组合</h2><p>相信现在的你已经知道了，规则引擎是由多个规则构成的。而这些规则较为通用，并不是针对指定场景的。因此，针对不同的场景，我们可以对规则进行组合使用。这里，我们要讨论的就是组合过程中需要注意的地方。</p><p>例如，价格页面可能会存在对商品ID的判定，但是通用促销页面则可能是判定用户属性，他们使用的规则会有所不同。价格页面用A和B的组合，促销页面用B和C的组合。这就像游戏中，每个装备都有自己的属性以及作用。而不同的玩家根据自己的需要，会对装备进行组合，寻找更匹配自己的“套装”。</p><h3 id="规则整合"><a aria-hidden="true" tabindex="-1" href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#规则整合"><span class="icon icon-link"></span></a>规则整合</h3><p>上一讲我们提到了规则判定本来是策略模式，但是如果是多条一起判定，就可能成了职责链模式。其实那个时候就已经开始使用这种整合思想了。</p><p>职责链就相当于把职责串联成一个链条，让规则顺着链条走下去，最后走出结果。</p><p>我们抄一下上一讲的代码：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">interface IContext;</span></div><div class="token-line"><span class="token plain">    interface IRuleResult;</span></div><div class="token-line"><span class="token plain">    interface IRule{</span></div><div class="token-line"><span class="token plain">      IRuleResult Check(IContext context);</span></div><div class="token-line"><span class="token plain">    }</span></div></pre></div><p>具体实现我们就不摘抄了。我们假设你为当前的场景配置了四个不同的规则，分别是Rule1，Rule2，Rule3，Rule4，那么你的判定代码应该是类似这样的：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">[Rule1,Rule2,Rule3,Rule4].reduce((prev,rule)=&gt;{</span></div><div class="token-line"><span class="token plain">      var result = rule.Check(context);</span></div><div class="token-line"><span class="token plain">      // 如有其余逻辑可以在这里处理</span></div><div class="token-line"><span class="token plain">      return prev || result;</span></div><div class="token-line"><span class="token plain">    },false)</span></div></pre></div><p>通用的判定规则只需要这类简单的代码组合、链式判定即可。注意，这里存在一个问题，如果规则本身有依赖，那么如何处理呢？</p><p>可能这里你会困惑：规则依赖是什么？</p><p>我来举个例子。假设你现在身上有两个装备，一个描述是：受到攻击，减少伤害5点。另一个是：受到攻击，减少伤害50%。</p><p>那么这个时候你收到了100点伤害，真正打到身上的伤害是多少呢？有下面两种情况：</p><p><img src="https://static001.geekbang.org/resource/image/32/04/326c0974ca646e5ec65a8b0c959ea404.jpg?wh=4500x1062" alt=""/></p><p>你会发现，很多算法是依赖顺序的，顺序不同就会得到不同的结果。</p><p>而职责链要如何解决这个问题呢？我们可以把这个问题分成数据传递和判定顺序两部分来看。</p><p>针对第一个问题，context是顺着职责链一路下去的。因此当数据在context上传递的时候，至少数据传递问题我们解决了。而判定顺序，应该是后台配置的。我们读取配置的时候，要顺便读取配置顺序。</p><p>可能你会说：我按照写入顺序来做判定不就好了吗。先做的放前面，后做的放后面。</p><p>这里存在两个可能改变顺序的地方，一个是数据库，一个是序列化。</p><p>我们都知道，规则配置无论如何指定顺序，最终肯定是放在数据库里的，而数据库是基于集合的。如果你依赖写入顺序，很快就会发现，由于数据库默认不保证顺序，你拿出来的数据有时候是基于写入顺序的，有时候不是。因此你一定会指定order by。这个时候，我们就需要一个字段来帮我们做排序。因此，<strong>排序字段是必备的。</strong></p><p>此外，服务端在序列化的时候，因为很多序列化器也不保证数组顺序，为了避免这种不可预知的问题，我们通常会指定顺序。<strong>使用的时候，自己再排一次序，避免发生顺序错乱。</strong></p><p>最后，顺序可能经常存在调整。为了调整DB方便，我们也需要指定order字段，方便调整书序。这样，规则整合的问题才能真正得到解决。</p><h3 id="规则翻译"><a aria-hidden="true" tabindex="-1" href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#规则翻译"><span class="icon icon-link"></span></a>规则翻译</h3><p>规则翻译的主要原因是，我们前端传过来的规则经常会存在加密的情况。</p><p>当系统中存在BFF的时候，我们通常把解密模块放在BFF中。第一个原因是BFF比较前置，可以降低后续的服务压力。第二个是BFF大部分是JavaScript做的，而前端也是JavaScript做的加密，这里会比较方便。</p><p>如果前端代码是JavaScript加密的，BFF用JavaScript解密，那么又回到了我们成对加解密的思路。因此，存储的时候依然是采用成对加解密的思路即可。这里你也可以参考第10讲的内容。</p><h2 id="规则打分"><a aria-hidden="true" tabindex="-1" href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#规则打分"><span class="icon icon-link"></span></a>规则打分</h2><p>虽然大部分情况下规则可以做成布尔类型，要么通过，要么不通过，但是有的时候，例如真人判定的规则里，我们还加入了打分的概念。也就是说，有些规则即使不通过，也可能不拦截，这要取决于其余规则的得分。这个时候，我们就需要对规则进行加权计算，也就是打分。</p><p>不过，单个规则的分数是难以制定的，大部分情况下我们是根据线上的情况进行逐步调整的。例如，根据规则误伤的人数，计算分值。一般说来，误伤越低，分数越高。误伤越高，分数越低。</p><h3 id="规则分数计算"><a aria-hidden="true" tabindex="-1" href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#规则分数计算"><span class="icon icon-link"></span></a>规则分数计算</h3><p>规则分数计算与职责链的不同在于，职责链是串行调用，规则分数是并行调用。当然，现实情况中可能是两者共用，例如多个规则并行，每个规则内部有子规则，子规则是串行。不论怎么使用，我们都只需要将分数直接相加，就可以得出总分数，然后再划分阈值进行判定即可。</p><p>如果是串行，那么在reduce的过程中可以通过reduce的initvalue串下去，也可以通过context做为全局变量传递下去。initvalue的传递，定义域被限定在了当前reduce内，也就是隔离性比较好。如果用context，可以实现跨规则的记分，灵活性很强，但是隔离性较差，影响调试。</p><p>但是，我们依然需要对每个规则增加一个权重，这样可以实现更灵活的打分。</p><p>可能你会觉得奇怪：老师，我们已经给不同规则定出不同的分数了，为什么还要给出个权重呢？如果一个规则是10分，权重为1，这和“给5分，权重为2”，没有区别啊？</p><p>是的，针对单个规则在单个场景下的使用，是没有区别的。但是我们的规则如果跨场景呢？</p><p>例如校验Cookie，可能是一个10分的规则。但是对于订单规则，他希望自己把这个规则提升得更重要一些。这时候如果他把规则提升到20分，但是其余的规则使用方不同意，他们依然想用10分呢？</p><p>这个时候有两种做法，一种是覆盖分数，也就是自己重新定义一个分数“20”，不用默认的10分。还一种是保持10分不变，增加一个2的权重。</p><p>大部分情况下，我们会选择第二种方法，因为这个在视觉上更直观，计算也更加方便。你一看到权重2，就知道这个规则的重要性翻倍了。但是，如果使用重定义分数的办法，等你查找哪个规则导致分数不对的时候，发现满篇都是各种分数，还要查看原始分数才知道当时是调高了还是调低了。<strong>这会严重拖慢调整策略的速度。</strong></p><h3 id="规则分数阈值问题"><a aria-hidden="true" tabindex="-1" href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#规则分数阈值问题"><span class="icon icon-link"></span></a>规则分数阈值问题</h3><p>规则分数的阈值就是一个判断，这个没有任何技术含量。</p><p>但是，这里需要注意的是：当误伤了用户，用户来投诉的时候，你如何知道当时用户得分多少，阈值多少，如何被误伤呢？</p><p>这里就再次遇到了日志问题。</p><p>再强调一次：**只要存储成本顶得住，反爬记再多的日志都不嫌多。**考虑到阈值变更其实是一个很低频的事情，因此其实并不需要完整记下来当前阈值，记录时间等等完整信息，我们可以只记录ID，后续用ID去串联。</p><p>例如，阈值变更，在配置系统是有历史的，那么只需要记录当前的版本号即可。此外，用户当前分数，也不一定非要记录，尤其是记录分数可能会导致记录分数计算过程。这个时候可以记录当前规则信息——规则配置系统也应该是有版本号的。有了所有的匹配之后，那么在排障的时候，可以重算分数。这样就避开了存储问题，时间换空间。</p><h2 id="按规则随机跳过"><a aria-hidden="true" tabindex="-1" href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#按规则随机跳过"><span class="icon icon-link"></span></a>按规则随机跳过</h2><p>我们前面提到过，随机跳过有两种，一种是计算概率，一种是按照集群weight来设置。我们先看直接计算概率的办法。</p><h3 id="按概率跳过"><a aria-hidden="true" tabindex="-1" href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#按概率跳过"><span class="icon icon-link"></span></a>按概率跳过</h3><p>按概率跳过，首先要明确需求：是按总人数计算概率，还是在爬虫里计算概率？</p><p>通常我们说“跳过”的时候，都是在爬虫里计算。而随机误伤的时候，则是在总人数里随机。</p><p>为什么这么说呢？一方面，我们谈“跳过”，指的是明明它是爬虫，我们依然要放过它。因此，这个操作应该是“爬虫中”进行。另一方面，我们谈“随机误伤”，指的是不管是不是普通用户，我们都要误伤一下。因此，这个操作应该是在“总用户”进行。</p><p>有了这两个分析之后，我们就能发现，<strong>跳过是在爬虫上操作，也就是要先判定</strong>**，****再根据判定结果来进行操作。**而随机误伤，不用关心反爬状态，因此不需要判定是否是爬虫，可以在前置做短路操作。</p><p>需求明确后， 后续就简单了。 大概代码如下：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">var alive = 0.791; // 通用跳过概率</span></div><div class="token-line"><span class="token plain">    var death = 0.0001;// 通用随机误伤概率</span></div><div class="token-line"><span class="token plain">    if(Math.random() &lt; deadth){</span></div><div class="token-line"><span class="token plain">      reutrn false;// 无脑误伤用户，不再判定</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">    // 上面是前置操作，如果进入，已经直接return，无需再判定爬虫</span></div><div class="token-line"><span class="token plain">    var result = Rules.check(context);// 假定判断结果在result里面。true为爬虫。</span></div><div class="token-line"><span class="token plain">    // 下面是后置操作，如果进入，则判定是否随机跳过，不跳过则正常走，跳过就认为是正常用户</span></div><div class="token-line"><span class="token plain">    if(result &amp;&amp; Math.random() &gt; threshold){</span></div><div class="token-line"><span class="token plain">      // 超出随机跳过范围</span></div><div class="token-line"><span class="token plain">      returne false; // 的确是爬虫</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">    else{</span></div><div class="token-line"><span class="token plain">      reutrn true;// 是普通用户。也可以直接短路操作!(result &amp;&amp; (Math.random &gt; threshold))</span></div><div class="token-line"><span class="token plain">    }</span></div></pre></div><p>这样，通过前置和后置的两种方式，就避免了频繁计算概率，并且符合需求。</p><h3 id="集群weight跳过"><a aria-hidden="true" tabindex="-1" href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#集群weight跳过"><span class="icon icon-link"></span></a>集群weight跳过</h3><p>集群weight跳过，在前文提到过。因为集群本身在Nginx上做了随机，因此其实只需要关闭部分机器的验证功能，就等效于部分跳过。</p><p>前面我提过一个问题：对于一些不工整的随机概率，我们用什么方法来设置weight比较合适呢？</p><p>你可能还记得79.4%这个诡异的数字，但其实这个问题是有陷阱的。正确的思路是：集群weight只能做为快速变更的辅助，不建议用于常规功能。因为机器数是整数，只能实现一些工整的概率。如果要实现不工整的概率，例如79.4%这种，必然会导致调整weight的负载不均衡。</p><p>因此，调整weight，有意负载不均衡，来实现随机跳过，一般是在来不及发布的时候使用的权宜之计，并非主力做法，你也不必过于依赖79.4这个数字。必要的时候，你可以向上或者向下取一个工整的值。</p><h3 id="补充按规则跳过"><a aria-hidden="true" tabindex="-1" href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#补充按规则跳过"><span class="icon icon-link"></span></a>补充：按规则跳过</h3><p>按规则跳过的操作相对少见，一般要么是单纯是想把水搅浑，要么就是测试规则与正式规则混合部署，希望能够直接在战场演习。这类需求虽然不建议接，但是一旦有了，我们也有办法处理。具体方案有两个：</p><p>第一种方案，context设置全局变量传参出来。</p><p>因为context是唯一一个贯穿整个链路的变量，因此如果某个规则需要变更结果，只能通过这个方式通知其余人。这里面context相当于一个总线，我们在总线上进行广播，其余规则收到广播后，可以正常跑，然后结尾再判定context的信号进行强制改判定。</p><p>这样代码比较简单，但是效率较低，因为rule全跑了。当然，你也可以选择在context总线上有了信号之后所有Rule直接熔断跳过不判定，这样的好处是效率高，缺点是代码变复杂。不过如果基类实现这个通用功能，能稍好一些。</p><p>第二种方案，记分。</p><p>简单的说就是给出评分的时候，不直接给出总分，而是分别给出各个位置的分数。然后结尾再判定的时候，如果跳过规则的分数已经给出了指定值，那么直接强制不判定分数，或者强制降分到0，能跳过所有的阈值。你也可以把它想成一票否决权的感觉。</p><h2 id="概率的动态调整"><a aria-hidden="true" tabindex="-1" href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#概率的动态调整"><span class="icon icon-link"></span></a>概率的动态调整</h2><p>在上面讲解过那么多的“随机”之后，你会发现，无论是随机跳过还是随机误伤，都有可能根据情况实时调整。因此，它还需要有一个配置系统。</p><p>随机跳过的配置系统就是一个简单的Config系统，DB用于持久化存储数据，缓存用于提升读取速度，后台配置页面的create和update用于刷新缓存，定期用Job也刷缓存兜底，基本上就可以了。需要注意的是，前面我们提到过版本号的问题，因此需要特别注意存储版本号。</p><p>数据库表demo如下：<br/><img src="https://static001.geekbang.org/resource/image/8b/a4/8b10e5a2b1bf897df6a5558efd38caa4.jpg?wh=4500x2375" alt=""/></p><p>例如随机误伤的阈值就可以指定一个name，子表存储一个阈值即可。</p><p>操作历史表示意：<br/><img src="https://static001.geekbang.org/resource/image/a3/42/a338785d33d272c21ec1434a1a9f4e42.jpg?wh=4500x2023" alt=""/></p><p>此外，配置系统与规则系统很可能是部署在同一个DB上的，如果DB挂了，会直接存在单点故障。因此，需要有更强力的熔断措施。例如，验证服务器全部拉出，或者SLB断流，直接不提供验证服务，在SDK上设置超时熔断，直接断掉全部反爬虫系统。</p><p>最后，为了防止用户误操作，需要提供操作的上下限。例如随机误伤是极低概率，如果不小心设置为0.5，那就是直接误伤一半用户，妥妥的生产事故。因此需要限定为只允许使用小于一定上限的数字。甚至，可以考虑界面上只支持选择，不能自定义。</p><h2 id="规则白名单"><a aria-hidden="true" tabindex="-1" href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#规则白名单"><span class="icon icon-link"></span></a>规则白名单</h2><p>规则白名单与规则跳过十分接近。只不过，这类规则通常是通用规则，因此可以直接做前置判定，避免运行其余规则，消耗资源。</p><h3 id="指定区域白名单ipgps"><a aria-hidden="true" tabindex="-1" href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#指定区域白名单ipgps"><span class="icon icon-link"></span></a>指定区域白名单（IP，GPS）</h3><p>反爬虫系统经常碰到这种恼火的事情：有合作伙伴要与自己合作，API来不及开发，或者API数据有问题，所以合作伙伴要走爬虫。虽然很恼火，但是也没什么办法，不得不做。这个时候，我们就可能会根据IP进行前置的白名单洗白。</p><p>此外还有一个办法更简单，那就是直接新建一个集群，不部署反爬虫，但是参数需要指定key才能访问。合作伙伴使用指定的key来拉取数据即可。key一旦存在泄密，就需要更换。这样，还可以降低系统压力，避免合作伙伴与线上用户争抢资源。</p><p>这里我也给你补充一个主要针对APP爬虫的“GPS白名单”。APP爬虫针对指定的地理围栏可以拉黑，也可以洗白，根据业务需要可以灵活处理。</p><p>由于大部分反爬白名单需求实际上在国内（真是一个悲伤的经验），不会牵扯到北极圈之类的地方，因此也可以用经纬度偏移这种更简单的方式，无需计算公里数。在国内，大部分情况下经纬度画出来的矩形还是很接近矩形的。</p><h3 id="指定用户白名单"><a aria-hidden="true" tabindex="-1" href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#指定用户白名单"><span class="icon icon-link"></span></a>指定用户白名单</h3><p>指定用户的白名单则是UID判定。注意这类需求需要前置解决，不能后置，避免修改判定失败，同时前置也能提升效率。最后，白名单用户通常都是VIP用户，例如CEO，股东等等，因此操作过一次之后，最好存储下来。一般说来，你下次还会碰到他。</p><h2 id="小结"><a aria-hidden="true" tabindex="-1" href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#小结"><span class="icon icon-link"></span></a>小结</h2><p>好了，关于验证爬虫，我们就谈到这里。</p><p>这一讲，我们主要看了所有的规则判定方式以及规则的打分方式。</p><p>这些规则可以组合使用，同时，为了加密的需求，我们也提到了如何进行规则翻译这件事。而规则的打分，包括如何制定分数，计算分数，以及如何配置阈值等等。相对于改变规则的分数，调整分数权重会显得更加直观，计算也更便捷 。当然，在验证爬虫的过程中，我们有时也需要按规则随机跳过。最后，我们还讨论了各类白名单跳过的两种做法——指定区域和指定用户。</p><p><img src="https://static001.geekbang.org/resource/image/e7/ba/e71ffc296715da8a8cc14e1d35f758ba.jpg?wh=1920x1087" alt=""/></p><p>总体来说，前置的判定通常用于拉黑，而后置的判定通常用于洗白。当然这并非绝对的，如与实际需求冲突，还是要仔细分析。</p><h2 id="思考题"><a aria-hidden="true" tabindex="-1" href="/blog/反爬虫兵法演绎20讲/05.项目实战篇/03#思考题"><span class="icon icon-link"></span></a>思考题</h2><p>最后的最后，又到了愉快的思考题时间。还是老规矩，三选一。</p><ol><li>后置判定可以用于拉黑吗？优缺点分别是什么呢？</li><li>集群weight会导致复杂不均衡问题因此一般用于应急。那么，如果我们的机器本身就申请配置不均衡能解决这个问题吗？会导致什么新问题吗？</li><li>产品经理如果提了个需求：在某GPS点，拉黑半径五公里的用户。这个需求是画圆，需要进行计算了，不能无脑判定经纬度了。如何让性能提升呢？</li></ol><p>可以把想法写在评论区，让我看看你的奇思妙想。 反爬无定势，也许我也可以在评论区学习到更多的思路！</p><p><img src="https://static001.geekbang.org/resource/image/a1/f6/a17622f456152c200d449d2d7d54eef6.jpg?wh=1500x1615" alt=""/></p></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/GGwujun/blog/edit/master/docs/反爬虫兵法演绎20讲/05.项目实战篇/03.md">在 GitHub 上编辑此页<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="最后更新时间：">5/2/2022 10:56:46</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script>
      (function () {
        if (!location.port) {
          (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
              i[r] ||
              function () {
                (i[r].q = i[r].q || []).push(arguments);
              }),
              (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
          })(
            window,
            document,
            "script",
            "//www.google-analytics.com/analytics.js",
            "ga"
          );
          ga("create", "UA-149864185-1", "auto");
          ga("send", "pageview");
        }
      })();
    </script>
    <script src="/blog/umi.js"></script>
  </body>
</html>
