<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="/logo.png" />
    <link rel="stylesheet" href="/blog/umi.css" />
    <script>
      window.routerBase = "/blog";
    </script>
    <script>
      //! umi version: 3.5.17
    </script>
    <script>
      !(function () {
        var e = localStorage.getItem("dumi:prefers-color"),
          t = window.matchMedia("(prefers-color-scheme: dark)").matches,
          r = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === r[2] ? (t ? r[1] : r[0]) : r.indexOf(e) > -1 ? e : r[0]
        );
      })();
    </script>
    <title>09 | 动画：Vue中如何实现动画效果？</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/玩转vue3全家桶/03.基础入门篇/05" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog/">大师兄</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><span>计算机基础<ul><li><a href="/blog/编译原理之美">编译原理之美</a></li><li><a href="/blog/编译原理实战">编译原理实战</a></li><li><a href="/blog/深入浅出计算机组成原理">深入浅出计算机组成原理</a></li><li><a href="/blog/详解http">详解http</a></li><li><a href="/blog/计算机网络通关29讲">计算机网络通关29讲</a></li><li><a href="/blog/网络排查案例课">网络排查案例课</a></li><li><a href="/blog/linux操作系统">linux操作系统</a></li><li><a href="/blog/linux性能优化实战">linux性能优化实战</a></li><li><a href="/blog/程序员数学基础">程序员数学基础</a></li><li><a href="/blog/趣谈网络协议">趣谈网络协议</a></li><li><a href="/blog/操作系统实战">操作系统实战</a></li><li><a href="/blog/软件工程之美">软件工程之美</a></li><li><a href="/blog/sql必知必会">sql必知必会</a></li><li><a href="/blog/操作系统实战45讲">操作系统实战45讲</a></li><li><a href="/blog/网络编程实战">网络编程实战</a></li></ul></span><span>算法<ul><li><a href="/blog/常用算法25讲">常用算法25讲</a></li><li><a href="/blog/数据结构与算法之美">数据结构与算法之美</a></li><li><a href="/blog/业务开发算法50讲">业务开发算法50讲</a></li><li><a href="/blog/动态规划面试宝典">动态规划面试宝典</a></li></ul></span><span>前端开发<ul><li><a href="/blog/浏览器工作原理与实践">浏览器工作原理与实践</a></li><li><a href="/blog/新时代产品经理进阶之路">新时代产品经理进阶之路</a></li><li><a href="/blog/全栈工程师修炼指南">全栈工程师修炼指南</a></li><li><a href="/blog/flutter核心技术与实战">flutter核心技术与实战</a></li><li><a href="/blog/java-script核心原理解析">java-script核心原理解析</a></li><li><a href="/blog/说透低代码">说透低代码</a></li><li><a href="/blog/nodejs应用开发实战">nodejs应用开发实战</a></li><li><a href="/blog/反爬虫兵法演绎20讲">反爬虫兵法演绎20讲</a></li><li><a href="/blog/reactnative新架构实战课">reactnative新架构实战课</a></li><li><a href="/blog/正则表达式入门">正则表达式入门</a></li><li><a href="/blog/重学前端">重学前端</a></li><li><a href="/blog/serverless入门课">serverless入门课</a></li><li><a href="/blog/type-script入门实战笔记">type-script入门实战笔记</a></li><li><a href="/blog/图解googlev8">图解googlev8</a></li><li><a href="/blog/vue3源码分析">vue3源码分析</a></li><li><a aria-current="page" class="active" href="/blog/玩转Vue3全家桶">玩转Vue3全家桶</a></li><li><a href="/blog/webassembly入门">webassembly入门</a></li><li><a href="/blog/手把手带你写一个Web框架">手把手带你写一个Web框架</a></li><li><a href="/blog/web漏洞挖掘实战">web漏洞挖掘实战</a></li><li><a href="/blog/跟月影学可视化">跟月影学可视化</a></li><li><a href="/blog/搞定音频技术">搞定音频技术</a></li><li><a href="/blog/攻克视频技术">攻克视频技术</a></li></ul></span><span>前端工程化<ul><li><a href="/blog/logger">logger</a></li><li><a href="/blog/webpack">webpack</a></li><li><a href="/blog/webpackChain">webpackChain</a></li></ul></span><span>前端性能优化<ul><li><a href="/blog/react性能调优">react性能调优</a></li></ul></span><span>软件测试<ul><li><a href="/blog/全链路压测实战30讲">全链路压测实战30讲</a></li><li><a href="/blog/性能测试实战30讲">性能测试实战30讲</a></li><li><a href="/blog/自动化测试高手课">自动化测试高手课</a></li><li><a href="/blog/软件测试52讲">软件测试52讲</a></li></ul></span><span>面试<ul><li><a href="/blog/面试现场">面试现场</a></li></ul></span><span>杂谈<ul><li><a href="/blog/超级访谈对话张雪峰">超级访谈对话张雪峰</a></li><li><a href="/blog/Git实战手册">Git实战手册</a></li><li><a href="/blog/NodeJS">NodeJS</a></li><li><a href="/blog/ReactJS">ReactJS</a></li><li><a href="/blog/UI设计">UI设计</a></li><li><a href="/blog/webpack4系列教程">webpack4系列教程</a></li><li><a href="/blog/前端知识体系">前端知识体系</a></li><li><a href="/blog/剑指offer刷题笔记">剑指offer刷题笔记</a></li><li><a href="/blog/思考与成长">思考与成长</a></li><li><a href="/blog/设计模式手册">设计模式手册</a></li></ul></span><div class="__dumi-default-navbar-tool"><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "></div></div></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog/"></a><h1>大师兄</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li>计算机基础<ul><li><a href="/blog/编译原理之美">编译原理之美</a></li><li><a href="/blog/编译原理实战">编译原理实战</a></li><li><a href="/blog/深入浅出计算机组成原理">深入浅出计算机组成原理</a></li><li><a href="/blog/详解http">详解http</a></li><li><a href="/blog/计算机网络通关29讲">计算机网络通关29讲</a></li><li><a href="/blog/网络排查案例课">网络排查案例课</a></li><li><a href="/blog/linux操作系统">linux操作系统</a></li><li><a href="/blog/linux性能优化实战">linux性能优化实战</a></li><li><a href="/blog/程序员数学基础">程序员数学基础</a></li><li><a href="/blog/趣谈网络协议">趣谈网络协议</a></li><li><a href="/blog/操作系统实战">操作系统实战</a></li><li><a href="/blog/软件工程之美">软件工程之美</a></li><li><a href="/blog/sql必知必会">sql必知必会</a></li><li><a href="/blog/操作系统实战45讲">操作系统实战45讲</a></li><li><a href="/blog/网络编程实战">网络编程实战</a></li></ul></li><li>算法<ul><li><a href="/blog/常用算法25讲">常用算法25讲</a></li><li><a href="/blog/数据结构与算法之美">数据结构与算法之美</a></li><li><a href="/blog/业务开发算法50讲">业务开发算法50讲</a></li><li><a href="/blog/动态规划面试宝典">动态规划面试宝典</a></li></ul></li><li>前端开发<ul><li><a href="/blog/浏览器工作原理与实践">浏览器工作原理与实践</a></li><li><a href="/blog/新时代产品经理进阶之路">新时代产品经理进阶之路</a></li><li><a href="/blog/全栈工程师修炼指南">全栈工程师修炼指南</a></li><li><a href="/blog/flutter核心技术与实战">flutter核心技术与实战</a></li><li><a href="/blog/java-script核心原理解析">java-script核心原理解析</a></li><li><a href="/blog/说透低代码">说透低代码</a></li><li><a href="/blog/nodejs应用开发实战">nodejs应用开发实战</a></li><li><a href="/blog/反爬虫兵法演绎20讲">反爬虫兵法演绎20讲</a></li><li><a href="/blog/reactnative新架构实战课">reactnative新架构实战课</a></li><li><a href="/blog/正则表达式入门">正则表达式入门</a></li><li><a href="/blog/重学前端">重学前端</a></li><li><a href="/blog/serverless入门课">serverless入门课</a></li><li><a href="/blog/type-script入门实战笔记">type-script入门实战笔记</a></li><li><a href="/blog/图解googlev8">图解googlev8</a></li><li><a href="/blog/vue3源码分析">vue3源码分析</a></li><li><a aria-current="page" class="active" href="/blog/玩转Vue3全家桶">玩转Vue3全家桶</a></li><li><a href="/blog/webassembly入门">webassembly入门</a></li><li><a href="/blog/手把手带你写一个Web框架">手把手带你写一个Web框架</a></li><li><a href="/blog/web漏洞挖掘实战">web漏洞挖掘实战</a></li><li><a href="/blog/跟月影学可视化">跟月影学可视化</a></li><li><a href="/blog/搞定音频技术">搞定音频技术</a></li><li><a href="/blog/攻克视频技术">攻克视频技术</a></li></ul></li><li>前端工程化<ul><li><a href="/blog/logger">logger</a></li><li><a href="/blog/webpack">webpack</a></li><li><a href="/blog/webpackChain">webpackChain</a></li></ul></li><li>前端性能优化<ul><li><a href="/blog/react性能调优">react性能调优</a></li></ul></li><li>软件测试<ul><li><a href="/blog/全链路压测实战30讲">全链路压测实战30讲</a></li><li><a href="/blog/性能测试实战30讲">性能测试实战30讲</a></li><li><a href="/blog/自动化测试高手课">自动化测试高手课</a></li><li><a href="/blog/软件测试52讲">软件测试52讲</a></li></ul></li><li>面试<ul><li><a href="/blog/面试现场">面试现场</a></li></ul></li><li>杂谈<ul><li><a href="/blog/超级访谈对话张雪峰">超级访谈对话张雪峰</a></li><li><a href="/blog/Git实战手册">Git实战手册</a></li><li><a href="/blog/NodeJS">NodeJS</a></li><li><a href="/blog/ReactJS">ReactJS</a></li><li><a href="/blog/UI设计">UI设计</a></li><li><a href="/blog/webpack4系列教程">webpack4系列教程</a></li><li><a href="/blog/前端知识体系">前端知识体系</a></li><li><a href="/blog/剑指offer刷题笔记">剑指offer刷题笔记</a></li><li><a href="/blog/思考与成长">思考与成长</a></li><li><a href="/blog/设计模式手册">设计模式手册</a></li></ul></li></ul><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "><button title="Dark theme" class="__dumi-default-dark-moon "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="22" height="22"><path d="M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z" p-id="3855"></path></svg></button><button title="Light theme" class="__dumi-default-dark-sun "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4026" width="22" height="22"><path d="M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z" p-id="4027"></path></svg></button><button title="Default to system" class="__dumi-default-dark-auto "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11002" width="22" height="22"><path d="M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z" p-id="11003"></path></svg></button></div></div></div><ul class="__dumi-default-menu-list"><li><a href="/blog/">大师兄 - 前端架构师</a></li></ul></div></div><ul role="slug-list" class="__dumi-default-layout-toc"><li title="前端过渡和动效" data-depth="2"><a href="/blog/玩转vue3全家桶/03.基础入门篇/05#前端过渡和动效"><span>前端过渡和动效</span></a></li><li title="Vue 3动画入门" data-depth="2"><a href="/blog/玩转vue3全家桶/03.基础入门篇/05#vue-3动画入门"><span>Vue 3动画入门</span></a></li><li title="清单应用优化" data-depth="2"><a href="/blog/玩转vue3全家桶/03.基础入门篇/05#清单应用优化"><span>清单应用优化</span></a></li><li title="列表动画" data-depth="2"><a href="/blog/玩转vue3全家桶/03.基础入门篇/05#列表动画"><span>列表动画</span></a></li><li title="" data-depth="2"><a href="/blog/玩转vue3全家桶/03.基础入门篇/05"><span></span></a></li><li title="页面切换动画" data-depth="2"><a href="/blog/玩转vue3全家桶/03.基础入门篇/05#页面切换动画"><span>页面切换动画</span></a></li><li title="JavaScript动画" data-depth="2"><a href="/blog/玩转vue3全家桶/03.基础入门篇/05#javascript动画"><span>JavaScript动画</span></a></li><li title="" data-depth="2"><a href="/blog/玩转vue3全家桶/03.基础入门篇/05#-1"><span></span></a></li><li title="总结" data-depth="2"><a href="/blog/玩转vue3全家桶/03.基础入门篇/05#总结"><span>总结</span></a></li><li title="思考题" data-depth="2"><a href="/blog/玩转vue3全家桶/03.基础入门篇/05#思考题"><span>思考题</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="09--动画vue中如何实现动画效果"><a aria-hidden="true" tabindex="-1" href="/blog/玩转vue3全家桶/03.基础入门篇/05#09--动画vue中如何实现动画效果"><span class="icon icon-link"></span></a>09 | 动画：Vue中如何实现动画效果？</h1><p>你好，我是大圣。</p><p>在上一讲中，我给你讲解了组件化设计的思路，有了组件，我们就可以积木式地搭建网页了。领会组件设计的思路后，小圣继续丰富了清单组件的功能，在组件的功能实现完毕后，我给他提出了一个新的要求，希望能有一些动画效果的加入，让这个应用显得不再这么生硬。</p><p>小圣自己琢磨以后，又找过来咨询我Vue 3中实现动画的方式，所以今天我就来跟你聊一下Vue中应该如何实现常见的过渡和动效。在讲解过程中，我们会继续给之前那个清单应用添砖加瓦，给它添加更多酷炫的玩法，让我们正式开始今天的学习吧。</p><h2 id="前端过渡和动效"><a aria-hidden="true" tabindex="-1" href="/blog/玩转vue3全家桶/03.基础入门篇/05#前端过渡和动效"><span class="icon icon-link"></span></a>前端过渡和动效</h2><p>在讲Vue中的动效和过渡之前，我想先跟你聊一下前端的过渡和动效的实现方式。举个例子，假设我现在有这样一个需求：在页面上要有一个div标签，以及一个按钮，点击页面的按钮后，能够让div标签的宽度得到增加。</p><p>在下面的代码中，我们可以实现上面所说的这个效果。这段代码里，首先是一个div标签，我们使用width控制宽度。我们想要的前端效果是，每次点击按钮的时候，div标签的宽度都增加100px。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">&lt;template&gt;</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">      &lt;div class=&quot;box&quot; :style=&quot;{width:width+&#x27;px&#x27;}&quot;&gt;&lt;/div&gt;</span></div><div class="token-line"><span class="token plain">      &lt;button @click=&quot;change&quot;&gt;click&lt;/button&gt;</span></div><div class="token-line"><span class="token plain">    &lt;/template&gt;</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    &lt;script setup&gt;</span></div><div class="token-line"><span class="token plain">    import {ref} from &#x27;vue&#x27;</span></div><div class="token-line"><span class="token plain">    let width= ref(100)</span></div><div class="token-line"><span class="token plain">    function change(){</span></div><div class="token-line"><span class="token plain">      width.value += 100</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">    &lt;/script&gt;</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    &lt;style&gt;</span></div><div class="token-line"><span class="token plain">    .box{</span></div><div class="token-line"><span class="token plain">      background:red;</span></div><div class="token-line"><span class="token plain">      height:100px;</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">    &lt;/style&gt;</span></div></pre></div><p>这个功能实现的效果图如下，小圣虽然实现了需求中提到的功能，但是现在的显示效果很生硬，这点你从下面的动态效果图中也能看出来。</p><p><img src="https://static001.geekbang.org/resource/image/0a/ef/0a52318a2a136bebbe711a70e5b2f0ef.gif?wh=991x310" alt="图片"/></p><p>为了优化显示的效果，首先我们可以通过一个CSS的属性transition来实现过渡，实现方式非常简单，直接在div的样式里加上一个transition配置就可以了。下面是具体的实现，其中我们给transition配置了三个参数，简单解释呢，就是div的width属性需要过渡，过渡时间是1秒，并且过渡方式是线性过渡。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">&lt;style&gt;</span></div><div class="token-line"><span class="token plain">    .box{</span></div><div class="token-line"><span class="token plain">      background:#d88986;</span></div><div class="token-line"><span class="token plain">      height:100px;</span></div><div class="token-line"><span class="token plain">      transition: width 1s linear;</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">    &lt;/style&gt;</span></div></pre></div><p>添加上述transition配置后，前端页面会显示如下的过渡效果，是不是流畅了一些呢？实际上，日常项目开发中类似的过渡效果是很常见的。</p><p><img src="https://static001.geekbang.org/resource/image/dd/e4/dd5bcf6e3dbcb4bd84f97093bc0a08e4.gif?wh=991x310" alt="图片"/></p><p>现在你能看到，<strong>我们可以通过transition来控制一个元素的<strong><strong>属</strong></strong>性的值，缓慢地变成另外一个值，这种操作就称之为过渡</strong>。除了transition，我们还可以通过animation和keyframe的组合实现动画。</p><p>在下面的代码中，我们指定标签的antimation配置，给标签设置move动画，持续时间为两秒，线性变化并且无限循环。然后使用@keyframes 定制move动画，内部定义了动画0%、50%和100%的位置，最终实现了一个方块循环移动的效果。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">.box1{</span></div><div class="token-line"><span class="token plain">      width:30px;</span></div><div class="token-line"><span class="token plain">      height:30px;</span></div><div class="token-line"><span class="token plain">      position: relative;</span></div><div class="token-line"><span class="token plain">      background:#d88986;</span></div><div class="token-line"><span class="token plain">      animation: move 2s linear infinite;</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">    @keyframes move {</span></div><div class="token-line"><span class="token plain">      0% {left:0px}</span></div><div class="token-line"><span class="token plain">      50% {left:200px}</span></div><div class="token-line"><span class="token plain">      100% {left:0}</span></div><div class="token-line"><span class="token plain">    }</span></div></pre></div><p>上面代码的实现效果如下：</p><p><img src="https://static001.geekbang.org/resource/image/8c/20/8c070a460f13cb979cc393b55ac6a420.gif?wh=991x310" alt="图片"/></p><p>这就是实现前端动画最简单的方式了，在网页应用开发的场景下，或多或少都会有过渡动画的使用需求。从最基本的颜色和位置的渐变，到页面切换都是动画的应用场景，这些动画在视觉和心理的体验上更加友好，比如等待时间的Loading加载提示，弹窗出现的显示动画等。</p><h2 id="vue-3动画入门"><a aria-hidden="true" tabindex="-1" href="/blog/玩转vue3全家桶/03.基础入门篇/05#vue-3动画入门"><span class="icon icon-link"></span></a>Vue 3动画入门</h2><p>通常我们实现的动画，会给Web应用带来额外的价值。动画和过渡可以增加用户体验的舒适度，让变化更加自然，并且可以吸引用户的注意力，突出重点。transition和animation让我们可以用非常简单的方式实现动画。那么在Vue 3中，我们到底该如何使用动画呢？</p><p>Vue 3中提供了一些动画的封装，使用内置的transition组件来控制组件的动画。为了让你先有一个感性的认识，这里我们先来举一个最简单的例子：我们可以使用一个按钮控制标题文字的显示和隐藏，具体的代码如下，通过点击按钮，就可以控制h1标签的显示和隐藏。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">&lt;template&gt;</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">      &lt;button @click=&quot;toggle&quot;&gt;click&lt;/button&gt;</span></div><div class="token-line"><span class="token plain">      &lt;h1 v-if=&quot;showTitle&quot;&gt;你好 Vue 3&lt;/h1&gt;</span></div><div class="token-line"><span class="token plain">    &lt;/template&gt;</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    &lt;script setup&gt;</span></div><div class="token-line"><span class="token plain">    import {ref} from &#x27;vue&#x27;</span></div><div class="token-line"><span class="token plain">    let showTitle = ref(true)</span></div><div class="token-line"><span class="token plain">    function toggle(){</span></div><div class="token-line"><span class="token plain">      showTitle.value = !showTitle.value</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">    &lt;/script&gt;</span></div></pre></div><p>在Vue中，如果我们想要在显示和隐藏标题文字的时候，加入动效进行过渡，那么我们直接使用transition组件包裹住需要动画的元素就可以了。</p><p>在下面代码中，我们使用transition包裹h1标签，并且设置了name为fade，Vue会在h1标签显示和隐藏的过程中去设置标签的class，我们可以根据这些class去实现想要的动效。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">&lt;transition name=&quot;fade&quot;&gt;</span></div><div class="token-line"><span class="token plain">        &lt;h1 v-if=&quot;showTitle&quot;&gt;你好 Vue 3&lt;/h1&gt;</span></div><div class="token-line"><span class="token plain">      &lt;/transition&gt;</span></div></pre></div><p>具体class的名字，Vue 的官网有一个图给出了很好的解释，图里的v-enter-from中的v，就是我们设置的name属性。所以在我们现在这个案例中，标签在进入和离开的时候，会有fade-enter-active和fade-leave-active的class，进入的开始和结束会有fade-enter-from和face-enter-to两个class。</p><p><img src="https://static001.geekbang.org/resource/image/71/92/718a6019316ed75f6d040e4983957692.png?wh=1920x866" alt="图片"/></p><p>根据上图所示的原理，我们在style标签中新增如下代码，通过fade-enter-active和fade-leave-active两个class，去控制动画全程的过渡属性。设置opacity有0.5秒的过渡时间，并且在元素进入前和离开后设置opacity为0。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">&lt;style&gt;</span></div><div class="token-line"><span class="token plain">    .fade-enter-active,</span></div><div class="token-line"><span class="token plain">    .fade-leave-active {</span></div><div class="token-line"><span class="token plain">      transition: opacity 0.5s linear;</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    .fade-enter-from,</span></div><div class="token-line"><span class="token plain">    .fade-leave-to {</span></div><div class="token-line"><span class="token plain">      opacity: 0;</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">    &lt;/style&gt;</span></div></pre></div><p>通过对元素进入和离开的过渡设置，我们可以实现如下动画：</p><p><img src="https://static001.geekbang.org/resource/image/af/e0/afeed23b2f92cac24de8b83fe3df80e0.gif?wh=460x290" alt="图片"/></p><h2 id="清单应用优化"><a aria-hidden="true" tabindex="-1" href="/blog/玩转vue3全家桶/03.基础入门篇/05#清单应用优化"><span class="icon icon-link"></span></a>清单应用优化</h2><p>现在，我们通过学到的动画原理，去优化一下第二讲的清单应用。我们先来了解一下操作的场景，在原先清单应用已有的交互下，有一个交互的优化，我们想对交互再增加一个优化项。具体来说，就是当输入框为空的时候，敲击回车需要弹出一个错误的提示。</p><p>小圣同学对Composition API已经非常熟悉了，很快速地写下了下面的代码。小圣在代码的template中新增了一个显示错误消息的div，设置为绝对定位，通过showModal变量控制显示和隐藏。并且在addTodo函数中，如果title.value为空，也就是用户输入为空的时候，就设置showModal为true。这时，如果用户敲击回车，就会显示弹窗，并且定时关闭。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">&lt;template&gt;</span></div><div class="token-line"><span class="token plain">    ...清单代码</span></div><div class="token-line"><span class="token plain">      &lt;div class=&quot;info-wrapper&quot; v-if=&quot;showModal&quot;&gt;</span></div><div class="token-line"><span class="token plain">        &lt;div class=&quot;info&quot;&gt;</span></div><div class="token-line"><span class="token plain">          哥，你啥也没输入！</span></div><div class="token-line"><span class="token plain">        &lt;/div&gt;</span></div><div class="token-line"><span class="token plain">      &lt;/div&gt;</span></div><div class="token-line"><span class="token plain">    &lt;/template&gt;</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    &lt;script setup&gt;</span></div><div class="token-line"><span class="token plain">    ...清单功能代码</span></div><div class="token-line"><span class="token plain">      let showModal = ref(false)</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">      function addTodo() {</span></div><div class="token-line"><span class="token plain">        if(!title.value){</span></div><div class="token-line"><span class="token plain">          showModal.value = true</span></div><div class="token-line"><span class="token plain">          setTimeout(()=&gt;{</span></div><div class="token-line"><span class="token plain">            showModal.value = false</span></div><div class="token-line"><span class="token plain">          },1500)</span></div><div class="token-line"><span class="token plain">          return </span></div><div class="token-line"><span class="token plain">        }</span></div><div class="token-line"><span class="token plain">        todos.value.push({</span></div><div class="token-line"><span class="token plain">          title: title.value,</span></div><div class="token-line"><span class="token plain">          done: false,</span></div><div class="token-line"><span class="token plain">        });</span></div><div class="token-line"><span class="token plain">        title.value = &quot;&quot;;</span></div><div class="token-line"><span class="token plain">      }</span></div><div class="token-line"><span class="token plain">    &lt;/script&gt;</span></div><div class="token-line"><span class="token plain">    &lt;style&gt;</span></div><div class="token-line"><span class="token plain">    .info-wrapper {</span></div><div class="token-line"><span class="token plain">      position: fixed;</span></div><div class="token-line"><span class="token plain">      top: 20px;</span></div><div class="token-line"><span class="token plain">      width:200px;</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">    .info {</span></div><div class="token-line"><span class="token plain">      padding: 20px;</span></div><div class="token-line"><span class="token plain">      color: white;</span></div><div class="token-line"><span class="token plain">      background: #d88986;</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">    &lt;/style&gt;</span></div></pre></div><p>新增交互后的前端显示效果如下，敲击回车后，如果输入为空，就会显示错误信息的弹窗。</p><p><img src="https://static001.geekbang.org/resource/image/60/47/60aea2a58ccb29ca0676189dfd3b9d47.gif?wh=646x463" alt="图片"/></p><p>功能虽然实现了，但是我们想进一步提高弹窗的交互效果，也就是弹窗的显示需要新增动画。对于这个需求，我们在直接使用transition包裹弹窗之后，设置对应进入和离开的CSS样式就可以了。首先，我们给transition动画设置name为modal，在style中通过对model对应的CSS设置过渡效果后，就给弹窗增加了弹窗的效果。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">&lt;transition name=&quot;modal&quot;&gt;</span></div><div class="token-line"><span class="token plain">      &lt;div class=&quot;info-wrapper&quot; v-if=&quot;showModal&quot;&gt;</span></div><div class="token-line"><span class="token plain">        &lt;div class=&quot;info&quot;&gt;</span></div><div class="token-line"><span class="token plain">          哥，你啥也没输入！</span></div><div class="token-line"><span class="token plain">        &lt;/div&gt;</span></div><div class="token-line"><span class="token plain">       &lt;/div&gt;</span></div><div class="token-line"><span class="token plain">    &lt;/transition&gt;</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    &lt;style&gt;</span></div><div class="token-line"><span class="token plain">      .modal-enter-from {</span></div><div class="token-line"><span class="token plain">        opacity: 0;</span></div><div class="token-line"><span class="token plain">        transform: translateY(-60px);</span></div><div class="token-line"><span class="token plain">      }</span></div><div class="token-line"><span class="token plain">      .modal-enter-active {</span></div><div class="token-line"><span class="token plain">        transition: all 0.3s ease;</span></div><div class="token-line"><span class="token plain">      }</span></div><div class="token-line"><span class="token plain">      .modal-leave-to {</span></div><div class="token-line"><span class="token plain">        opacity: 0;</span></div><div class="token-line"><span class="token plain">        transform: translateY(-60px);</span></div><div class="token-line"><span class="token plain">      }</span></div><div class="token-line"><span class="token plain">      .modal-leave-active {</span></div><div class="token-line"><span class="token plain">        transition: all 0.3s ease;</span></div><div class="token-line"><span class="token plain">      }</span></div><div class="token-line"><span class="token plain">    &lt;/style&gt;</span></div></pre></div><p>通过上面的代码，我们可以进行过渡效果的优化。优化后，前端页面的显示效果如下，可以看到弹窗有一个明显的滑入和划出的过渡效果。</p><p><img src="https://static001.geekbang.org/resource/image/1d/b4/1ddf1492ebddce584eac161e65d49bb4.gif?wh=646x463" alt="图片"/></p><h2 id="列表动画"><a aria-hidden="true" tabindex="-1" href="/blog/玩转vue3全家桶/03.基础入门篇/05#列表动画"><span class="icon icon-link"></span></a>列表动画</h2><p>学了transition组件后，小圣兴致勃勃地把清单应用的列表也做了动画显示，但是现在清单列表并不是一个单独的标签，而是v-for渲染的列表元素，所以小圣就来找我求助，问我怎么实现列表项依次动画出现的效果。</p><p>在Vue中，我们把这种需求称之为列表过渡。因为transition组件会把子元素作为一个整体同时去过渡，所以我们需要一个新的内置组件transition-group。在v-for渲染列表的场景之下，我们使用transition-group组件去包裹元素，通过tag属性去指定渲染一个元素。</p><p>此外，transition-group组件还有一个特殊之处，就是不仅可以进入和离开动画，还可以改变定位。就和之前的类名一样，这个功能新增了v-move类，在下面的代码中，使用transition-group包裹渲染的li元素，并且设置动画的name属性为flip-list。然后我们根据v-move的命名规范，设置 <code>.flip-list-move</code> 的过渡属性，就实现了列表依次出现的效果了。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">&lt;ul v-if=&quot;todos.length&quot;&gt;</span></div><div class="token-line"><span class="token plain">          &lt;transition-group name=&quot;flip-list&quot; tag=&quot;ul&quot;&gt;</span></div><div class="token-line"><span class="token plain">            &lt;li v-for=&quot;todo in todos&quot; :key=&quot;todo.title&quot;&gt;</span></div><div class="token-line"><span class="token plain">              &lt;input type=&quot;checkbox&quot; v-model=&quot;todo.done&quot; /&gt;</span></div><div class="token-line"><span class="token plain">              &lt;span :class=&quot;{ done: todo.done }&quot;&gt; {{ todo.title }}&lt;/span&gt;</span></div><div class="token-line"><span class="token plain">            &lt;/li&gt;</span></div><div class="token-line"><span class="token plain">          &lt;/transition-group&gt;</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">        &lt;/ul&gt;</span></div><div class="token-line"><span class="token plain">    &lt;style&gt;</span></div><div class="token-line"><span class="token plain">    .flip-list-move {</span></div><div class="token-line"><span class="token plain">      transition: transform 0.8s ease;</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">    .flip-list-enter-active,</span></div><div class="token-line"><span class="token plain">    .flip-list-leave-active {</span></div><div class="token-line"><span class="token plain">      transition: all 1s ease;</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">    .flip-list-enter-from,</span></div><div class="token-line"><span class="token plain">    .flip-list-leave-to {</span></div><div class="token-line"><span class="token plain">      opacity: 0;</span></div><div class="token-line"><span class="token plain">      transform: translateX(30px);</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">    &lt;/style&gt;</span></div></pre></div><p>通过上面的代码，我们就可以得到如下的实现效果。你可以看到，在新增列表和显示错误信息的弹窗上，都设置了过渡和动画。</p><h2 id=""><a aria-hidden="true" tabindex="-1" href="/blog/玩转vue3全家桶/03.基础入门篇/05"><span class="icon icon-link"></span></a><img src="https://static001.geekbang.org/resource/image/0b/a7/0b68e2ec1b617461f198094bd643aea7.gif?wh=646x463" alt="图片"/></h2><h2 id="页面切换动画"><a aria-hidden="true" tabindex="-1" href="/blog/玩转vue3全家桶/03.基础入门篇/05#页面切换动画"><span class="icon icon-link"></span></a>页面切换动画</h2><p>对于一般的前端页面应用来说，还有一个常见的动画切换的场景，就是在页面切换这个场景时的动画。<strong>这个动画切换场景的核心原理和弹窗动画是一样的，都是通过transition标签控制页面进入和离开的class</strong>。</p><p>现在默认是在vue-router的模式下，我们使用router-view组件进行动态的组件渲染。在路由发生变化的时候，我们计算出对应匹配的组件去填充router-view。</p><p>如果要在路由组件上使用转场，并且对导航进行动画处理，你就需要使用v-slot API。我们来到src/App.vue组件中，因为之前router-view没有子元素，所以我们要对代码进行修改。</p><p>在下面的代码中，router-view通过v-slot获取渲染的组件并且赋值给Component，然后使用transition 包裹需要渲染的组件，并且通过内置组件component的is属性动态渲染组件。这里vue-router的动画切换效果算是抛砖引玉，关于vue-router进阶的适用内容，全家桶实战篇后面的几讲还会继续深入剖析。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">&lt;router-view v-slot=&quot;{ Component }&quot;&gt;</span></div><div class="token-line"><span class="token plain">      &lt;transition  name=&quot;route&quot; mode=&quot;out-in&quot;&gt;</span></div><div class="token-line"><span class="token plain">        &lt;component :is=&quot;Component&quot; /&gt;</span></div><div class="token-line"><span class="token plain">      &lt;/transition&gt;</span></div><div class="token-line"><span class="token plain">    &lt;/router-view&gt;</span></div></pre></div><h2 id="javascript动画"><a aria-hidden="true" tabindex="-1" href="/blog/玩转vue3全家桶/03.基础入门篇/05#javascript动画"><span class="icon icon-link"></span></a>JavaScript动画</h2><p>在前端的大部分交互场景中，动画的主要目的是提高交互体验，CSS动画足以应对大部分场景。但如果碰见比较复杂的动画场景，就需要用JavaScript来实现，比如购物车、地图等场景。</p><p>在下面的代码中，我们首先在清单应用中加上一个删除事项的功能，当点击删除图标来删除清单的时候，可以直接删除一行。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">&lt;template&gt;</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">        ...清单应用其他代码</span></div><div class="token-line"><span class="token plain">        </span></div><div class="token-line"><span class="token plain">          &lt;transition-group name=&quot;flip-list&quot; tag=&quot;ul&quot;&gt;</span></div><div class="token-line"><span class="token plain">            &lt;li v-for=&quot;(todo,i) in todos&quot; :key=&quot;todo.title&quot;&gt;</span></div><div class="token-line"><span class="token plain">              &lt;input type=&quot;checkbox&quot; v-model=&quot;todo.done&quot; /&gt;</span></div><div class="token-line"><span class="token plain">              &lt;span :class=&quot;{ done: todo.done }&quot;&gt; {{ todo.title }}&lt;/span&gt;</span></div><div class="token-line"><span class="token plain">              &lt;span class=&quot;remove-btn&quot; @click=&quot;removeTodo($event,i)&quot;&gt;</span></div><div class="token-line"><span class="token plain">                ❌</span></div><div class="token-line"><span class="token plain">              &lt;/span&gt;</span></div><div class="token-line"><span class="token plain">            &lt;/li&gt;</span></div><div class="token-line"><span class="token plain">          &lt;/transition-group&gt; </span></div><div class="token-line"><span class="token plain">    &lt;/template&gt;</span></div><div class="token-line"><span class="token plain">    &lt;script&gt;</span></div><div class="token-line"><span class="token plain">      function removeTodo(e,i){</span></div><div class="token-line"><span class="token plain">        todos.value.splice(i,1)</span></div><div class="token-line"><span class="token plain">      }</span></div><div class="token-line"><span class="token plain">    &lt;/script&gt;</span></div></pre></div><p>通过上面的代码，我们能实现下面所示的效果：</p><p><img src="https://static001.geekbang.org/resource/image/5a/b2/5afba5a388f940995c39de50d04f7fb2.gif?wh=661x381" alt="图片"/></p><p>如果我们想在删除的时候，实现一个图标飞到废纸篓的动画，那么在这个场景下，使用单纯的CSS动画就不好实现了，我们需要引入JavaScript来实现动画。实现的思路也很简单，我们放一个单独存在的动画元素并且藏起来，当点击删除图标的时候，我们把这个动画元素移动到鼠标的位置，再飞到废纸篓里藏起来就可以了。</p><p>具体怎么做呢？ 在Vue的transition组件里，我们可以分别设置before-enter，enter和after-enter三个函数来更精确地控制动画。</p><p>在下面的代码中，我们首先定义了animate响应式对象来控制动画元素的显示和隐藏，并且用transition标签包裹动画元素。在beforeEnter函数中，通过getBoundingClientRect函数获取鼠标的点击位置，让动画元素通过translate属性移动到鼠标所在位置；并且在enter钩子中，把动画元素移动到初始位置，在afterEnter中，也就是动画结束后，把动画元素再隐藏起来，这样就实现了类似购物车的飞入效果。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">&lt;template&gt;</span></div><div class="token-line"><span class="token plain">        &lt;span class=&quot;dustbin&quot;&gt;</span></div><div class="token-line"><span class="token plain">          🗑</span></div><div class="token-line"><span class="token plain">        &lt;/span&gt;</span></div><div class="token-line"><span class="token plain">    &lt;div class=&quot;animate-wrap&quot;&gt;</span></div><div class="token-line"><span class="token plain">        &lt;transition @before-enter=&quot;beforeEnter&quot; @enter=&quot;enter&quot; @after-enter=&quot;afterEnter&quot;&gt;</span></div><div class="token-line"><span class="token plain">            &lt;div class=&quot;animate&quot; v-show=&quot;animate.show&quot;&gt;</span></div><div class="token-line"><span class="token plain">                📋</span></div><div class="token-line"><span class="token plain">            &lt;/div&gt;</span></div><div class="token-line"><span class="token plain">        &lt;/transition&gt;</span></div><div class="token-line"><span class="token plain">    &lt;/div&gt;</span></div><div class="token-line"><span class="token plain">    &lt;/template&gt;</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    &lt;script setup&gt;</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    let animate = reactive({</span></div><div class="token-line"><span class="token plain">      show:false,</span></div><div class="token-line"><span class="token plain">      el:null</span></div><div class="token-line"><span class="token plain">    })</span></div><div class="token-line"><span class="token plain">    function beforeEnter(el){</span></div><div class="token-line"><span class="token plain">          let dom = animate.el</span></div><div class="token-line"><span class="token plain">          let rect = dom.getBoundingClientRect()</span></div><div class="token-line"><span class="token plain">          let x = window.innerWidth - rect.left - 60</span></div><div class="token-line"><span class="token plain">          let y = rect.top - 10</span></div><div class="token-line"><span class="token plain">          el.style.transform = `translate(-${x}px, ${y}px)`</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">    function enter(el,done){</span></div><div class="token-line"><span class="token plain">          document.body.offsetHeight</span></div><div class="token-line"><span class="token plain">          el.style.transform = `translate(0,0)`</span></div><div class="token-line"><span class="token plain">          el.addEventListener(&#x27;transitionend&#x27;, done)</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">    function afterEnter(el){</span></div><div class="token-line"><span class="token plain">          animate.show = false</span></div><div class="token-line"><span class="token plain">          el.style.display = &#x27;none&#x27;</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">    function removeTodo(e,i){</span></div><div class="token-line"><span class="token plain">      animate.el = e.target</span></div><div class="token-line"><span class="token plain">      animate.show = true</span></div><div class="token-line"><span class="token plain">      todos.value.splice(i,1)</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">    &lt;/script&gt;</span></div><div class="token-line"><span class="token plain">    &lt;style&gt;</span></div><div class="token-line"><span class="token plain">    .animate-wrap .animate{</span></div><div class="token-line"><span class="token plain">        position :fixed;</span></div><div class="token-line"><span class="token plain">        right :10px;</span></div><div class="token-line"><span class="token plain">        top :10px;</span></div><div class="token-line"><span class="token plain">        z-index: 100;</span></div><div class="token-line"><span class="token plain">        transition: all 0.5s linear;</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">    &lt;/style&gt;</span></div></pre></div><p>上面代码的显示效果如下，我们点击删除后，除了列表本身的动画移出效果，还多了一个飞入废纸篓的效果。你能看到，在引入JavaScript后，我们可以实现更多定制的动画效果。</p><h2 id="-1"><a aria-hidden="true" tabindex="-1" href="/blog/玩转vue3全家桶/03.基础入门篇/05#-1"><span class="icon icon-link"></span></a><img src="https://static001.geekbang.org/resource/image/0d/00/0da30b53ee409874259965d0a86d4400.gif?wh=661x381" alt="图片"/></h2><h2 id="总结"><a aria-hidden="true" tabindex="-1" href="/blog/玩转vue3全家桶/03.基础入门篇/05#总结"><span class="icon icon-link"></span></a>总结</h2><p>今天这一讲的主要内容讲完了，我们来简单复习一下今天学到的知识点。</p><p>首先我们学习了前端使用CSS实现简单动画的transition和animation两个配置；然后，我们了解到了通过Vue 3提供的transition组件，我们可以控制在Vue中动画元素进入和离开页面时候的class；通过制定的命名规范，在CSS中设置过渡和动画效果，从而很方便地实现过渡效果，并且丰富了清单应用的弹窗功能；在这之后，我们使用transition-group实现列表元素的动画；最后，我还带你了解了vue-router中页面切换动画的实现方式。</p><p>相信学完今天这一讲，你会对Vue 3中实现简单动画的方式有所领会。今天我们实现的动画功能其实是Vue中动画的入门实战，所以我特意带你体验了全套玩法。不过你需要注意的是，实际开发中动画也不是越多越好，动画的设计也需要设计师去系统地设计效果，不要用动画做出眼花缭乱的网页。</p><p>而且，实际开发中如果想实现更复杂的动画，比如常见电商中商品飞入购物车的效果，管理系统中丰富的动画效果等，只借助transition组件是很难实现的。你需要借助JavaScript和第三方库的支持，在beforeEnter、enter、afterEnter等函数中实现动画。</p><h2 id="思考题"><a aria-hidden="true" tabindex="-1" href="/blog/玩转vue3全家桶/03.基础入门篇/05#思考题"><span class="icon icon-link"></span></a>思考题</h2><p>关于今天设计的弹窗动画，如果想实现一个振动的效果，该如何实现呢？</p><p>欢迎在留言区留言讨论，也欢迎你把这一讲推荐给你的朋友、同事。我们下一讲见！</p></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/GGwujun/blog/edit/master/docs/玩转Vue3全家桶/03.基础入门篇/05.md">在 GitHub 上编辑此页<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="最后更新时间：">5/2/2022 10:56:56</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script>
      (function () {
        if (!location.port) {
          (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
              i[r] ||
              function () {
                (i[r].q = i[r].q || []).push(arguments);
              }),
              (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
          })(
            window,
            document,
            "script",
            "//www.google-analytics.com/analytics.js",
            "ga"
          );
          ga("create", "UA-149864185-1", "auto");
          ga("send", "pageview");
        }
      })();
    </script>
    <script src="/blog/umi.js"></script>
  </body>
</html>
